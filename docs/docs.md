<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

# squatch

Squatch.js is the Referral SaaSquatch javascript SDK and a one-stop shop to
integrate a referral program into your website or web app.
It can show referral widgets on any website, track users, generate unique
referral short links and referral codes, and more.

# init

Initializes the static `squatch` global. This sets up:

-   `squatch.api()` a static instance of the [WidgetApi](#widgetapi)
-   `squatch.widgets()` a static instance of [Widgets](#widgets)

**Parameters**

-   `config` **[ConfigOptions](#configoptions)** Configuration details

**Examples**

```javascript
squatch.init({tenantAlias:'test_basbtabstq51v'});
```

# ready

Squatch.js can't start safely making operations until it's "ready". This
function detects that state.

**Parameters**

-   `fn` **[function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** A callback once Squatch.js is ready.

**Examples**

```javascript
squatch.ready(function() {
  console.log("ready!");
  squatch.api().cookieUser();
});
```

# api

Static instance of the [WidgetApi](#widgetapi). Make sure you call [init](#init) first

**Examples**

```javascript
squatch.init({tenantAlias:'test_basbtabstq51v'});
squatch.ready(function() {
  squatch.api().cookieUser();
});
```

# widgets

Static instance of [Widgets](#widgets). Make sure you call [init](#init) first

**Examples**

```javascript
squatch.init({tenantAlias:'test_basbtabstq51v'});
squatch.ready(function() {
  squatch.widgets().cookieUser().then(doSomething);
});
```

# autofill

**Parameters**

-   `element`  

# ConfigOptions

When you load Squatch.js you need to provide these configuration options.

**Properties**

-   `tenantAlias` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The Tenant that you're using.
-   `domain` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** The domain for API. Defaults to `https://app.referralsaasquatch.com`

# WidgetResult

When a widget is loaded using [Widgets](#widgets) you'll get both the `user` data and the `widget` object back.

**Properties**

-   `widget` **Widget** The widget that was created.
-   `user` **User** The user that's in the widget.

# Widgets

The Widgets class contains a widget loading process for different calls
to the WidgetApi.

## constructor

Initialize a new [Widgets](#widgets) instance.

**Parameters**

-   `config` **[ConfigOptions](#configoptions)** Config details

**Examples**

_Browser example_

```javascript
var widgets = new squatch.Widgets({tenantAlias:'test_12b5bo1b25125'});
```

_Browserify/Webpack example_

```javascript
var Widgets = require('squatch-js').Widgets;
var widgets = new Widgets({tenantAlias:'test_12b5bo1b25125'});
```

_Babel+Browserify/Webpack example_

```javascript
import {Widgets} from 'squatch-js';
let widgets = new Widgets({tenantAlias:'test_12b5bo1b25125'});
```

## createCookieUser

This function calls the WidgetApi.cookieUser() method, and it renders
the widget if it is successful. Otherwise it shows the "error" widget.

**Parameters**

-   `config` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 
    -   `config.widgetType` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** (REFERRED_WIDGET/CONVERSION_WIDGET)
    -   `config.engagementMedium` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** (POPUP/MOBILE)
    -   `config.jwt` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the JSON Web Token (JWT) that is used to
                                   validate the data (can be disabled)

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[WidgetResult](#widgetresult)>** json object if true, with a Widget and user details.

## upsertUser

This function calls the WidgetApi.upsert() method, and it renders
the widget if it is successful. Otherwise it shows the "error" widget.

**Parameters**

-   `config` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 
    -   `config.user` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the user details
        -   `config.user.id` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
        -   `config.user.accountId` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
    -   `config.widgetType` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** (CONVERSION_WIDGET/REFERRING_WIDGET)
    -   `config.engagementMedium` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** (POPUP/MOBILE)
    -   `config.jwt` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the JSON Web Token (JWT) that is used
                                   to validate the data (can be disabled)

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[WidgetResult](#widgetresult)>** json object if true, with a Widget and user details.

## render

This function calls the WidgetApi.render() method, and it renders
the widget if it is successful. Otherwise it shows the "error" widget.

**Parameters**

-   `config` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 
    -   `config.user` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the user details
        -   `config.user.id` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
        -   `config.user.accountId` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
    -   `config.widgetType` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** (REFERRED_WIDGET/REFERRING_WIDGET)
    -   `config.engagementMedium` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** (POPUP/MOBILE)
    -   `config.jwt` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the JSON Web Token (JWT) that is used
                                   to validate the data (can be disabled)

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[WidgetResult](#widgetresult)>** json object if true, with a Widget and user details.

# EmbedWidget

**Extends Widget**

An EmbedWidget is displayed inline in part of your page. 

To create an EmbedWidget use [Widgets](#widgets)

# PopupWidget

**Extends Widget**

The PopupWidget is used to display popups (also known as "Modals"). 
Popups widgets are rendered on top of other elements in a page.

To create a PopupWidget use [Widgets](#widgets)

## open

Opens the widget.

## close

Closes the widget

# CtaWidget

**Extends PopupWidget**

A CtaWidget is displayed on top of your page 

To create a CtaWidget use [Widgets](#widgets)

## open

## close

# WidgetApi

The WidgetApi class is a wrapper around the Widget Endpoints of the SaaSquatch REST API.

## constructor

Initialize a new [WidgetApi](#widgetapi) instance.

**Parameters**

-   `config` **[ConfigOptions](#configoptions)** Config details

**Examples**

_Browser example_

```javascript
var squatchApi = new squatch.WidgetApi({tenantAlias:'test_12b5bo1b25125'});
```

_Browserify/Webpack example_

```javascript
var WidgetApi = require('squatch-js').WidgetApi;
var squatchApi = new WidgetApi({tenantAlias:'test_12b5bo1b25125'});
```

_Babel+Browserify/Webpack example_

```javascript
import {WidgetApi} from 'squatch-js';
let squatchApi = new WidgetApi({tenantAlias:'test_12b5bo1b25125'});
```

## cookieUser

Creates/upserts an anonymous user.

**Parameters**

-   `params` **\[[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)](default { widgetType: '', engagementMedium: '', jwt: '' })** 
    -   `params.widgetType` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** (REFERRED_WIDGET/CONVERSION_WIDGET)
    -   `params.engagementMedium` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** (POPUP/MOBILE)
    -   `params.jwt` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the JSON Web Token (JWT) that is used to
                                   validate the data (can be disabled)

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** json object if true, with the widget template, jsOptions and user details.

## upsert

Creates/upserts user.

**Parameters**

-   `params` **\[[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)](default { widgetType: '', engagementMedium: '', jwt: '' })** 
    -   `params.user` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the user details
        -   `params.user.id` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
        -   `params.user.accountId` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
    -   `params.widgetType` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** (REFERRED_WIDGET/REFERRING_WIDGET)
    -   `params.engagementMedium` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** (POPUP/MOBILE)
    -   `params.jwt` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the JSON Web Token (JWT) that is used
                                   to validate the data (can be disabled)

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** string if true, with the widget template, jsOptions and user details.

## render

Description here.

**Parameters**

-   `params` **\[[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)](default { widgetType: '', engagementMedium: '', jwt: '' })** 
    -   `params.user` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the user details
        -   `params.user.id` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
        -   `params.user.accountId` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
    -   `params.widgetType` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** (REFERRED_WIDGET/REFERRING_WIDGET)
    -   `params.engagementMedium` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** (POPUP/MOBILE)
    -   `params.jwt` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the JSON Web Token (JWT) that is used
                                   to validate the data (can be disabled)

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** template html if true.

## squatchReferralCookie

Description here.

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 
    -   `params.code` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the user details

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** code referral code if true.
