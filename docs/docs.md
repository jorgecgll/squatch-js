<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [squatch](#squatch)
-   [api](#api)
-   [widgets](#widgets)
-   [init](#init)
-   [ready](#ready)
-   [autofill](#autofill)
-   [submitEmail](#submitemail)
-   [ConfigOptions](#configoptions)
-   [EngagementMedium](#engagementmedium)
-   [WidgetType](#widgettype)
-   [WidgetResult](#widgetresult)
-   [Widgets](#widgets-1)
    -   [constructor](#constructor)
    -   [createCookieUser](#createcookieuser)
    -   [upsertUser](#upsertuser)
    -   [render](#render)
    -   [autofill](#autofill-1)
    -   [submitEmail](#submitemail-1)
-   [EmbedWidget](#embedwidget)
-   [PopupWidget](#popupwidget)
-   [CtaWidget](#ctawidget)
    -   [open](#open)
    -   [close](#close)
-   [WidgetApi](#widgetapi)
    -   [constructor](#constructor-1)
    -   [cookieUser](#cookieuser)
    -   [upsertUser](#upsertuser-1)
    -   [render](#render-1)
    -   [invite](#invite)
    -   [squatchReferralCookie](#squatchreferralcookie)

## squatch

Squatch.js is the Referral SaaSquatch javascript SDK and a one-stop shop to
integrate a referral program into your website or web app.
It can show referral widgets on any website, track users, generate unique
referral short links and referral codes, and more.

## api

A static instance of the [WidgetApi](#widgetapi) created when you call [init](#init).

Read the [WidgetApi](#widgetapi) docs.

Returns **[WidgetApi](#widgetapi)** static instance

## widgets

A static instance of the [Widgets](#widgets) created when you call [init](#init).

Read the [Widgets](#widgets) docs.

Returns **[Widgets](#widgets)** static instance

## init

Initializes the static `squatch` global. This sets up:

-   `squatch.api()` a static instance of the [WidgetApi](#widgetapi)
-   `squatch.widgets()` a static instance of [Widgets](#widgets)

**Parameters**

-   `config` **[ConfigOptions](#configoptions)** Configuration details

**Examples**

```javascript
squatch.init({tenantAlias:'test_basbtabstq51v'});
```

Returns **void** 

## ready

Squatch.js can't start safely making operations until it's "ready". This
function detects that state.

**Parameters**

-   `fn` **[function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** A callback once Squatch.js is ready.

**Examples**

```javascript
squatch.ready(function() {
  console.log("ready!");
  squatch.api().cookieUser();
});
```

Returns **void** 

## autofill

Autofills a referral code into an element when someone has been referred.
Uses [WidgetApi.squatchReferralCookie](WidgetApi.squatchReferralCookie) behind the scenes.

**Parameters**

-   `selector` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** Element class/id

Returns **void** 

## submitEmail

Overrides the default function that submits the user email. If you have
Security enabled, the email needs to be signed before it's submitted.

**Parameters**

-   `fn` **[function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** Callback function for the 'submit_email' event.

**Examples**

```javascript
squatch.submitEmail(function(target, widget, email) {
  // Sign email and generate jwt token
  var jwt = 'token';
  widget.reload(email, jwt);
});
```

Returns **void** 

## ConfigOptions

When you load Squatch.js you need to provide these configuration options.

**Properties**

-   `tenantAlias` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The Tenant that you're using.
-   `domain` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** The domain for API. Defaults to `https://app.referralsaasquatch.com`

## EngagementMedium

EngagementMedium is an enum for the content of the widgets.

**Properties**

-   `REFERRER_WIDGET` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** Widget content that lets people make referrals
-   `CONVERSION_WIDGET` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** Widget content that shows that someone has been referred

**Examples**

```javascript
engagementMedium: "REFERRER_WIDGET"
```

## WidgetType

WidgetType is an enum for types of ways a Widget can be displayed.

**Properties**

-   `POPUP` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** Displays the widget as a modal popup. Creates a [PopupWidget](#popupwidget)
-   `EMBED` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** Displays the widget embedded in the page. Create an [EmbedWidget](#embedwidget)

**Examples**

```javascript
widgetType: "POPUP"
```

## WidgetResult

When a widget is loaded using [Widgets](#widgets) you'll get both the `user` data and the `widget` object back.

**Properties**

-   `widget` **Widget** The widget that was created.
-   `user` **User** The user that's in the widget.

## Widgets

`Widgets` is a factory for creating widgets. It's possible to build your own widgets using the
[WidgetApi](#widgetapi) but most people will prefer to use these easy methods.

**Parameters**

-   `config`  

### constructor

Initialize a new [Widgets](#widgets) instance.

**Parameters**

-   `config` **[ConfigOptions](#configoptions)** Config details

**Examples**

_Browser example_

```javascript
var widgets = new squatch.Widgets({tenantAlias:'test_12b5bo1b25125'});
```

_Browserify/Webpack example_

```javascript
var Widgets = require('@saasquatch/squatch-js').Widgets;
var widgets = new Widgets({tenantAlias:'test_12b5bo1b25125'});
```

_Babel+Browserify/Webpack example_

```javascript
import {Widgets} from '@saasquatch/squatch-js';
let widgets = new Widgets({tenantAlias:'test_12b5bo1b25125'});
```

### createCookieUser

This function calls the [WidgetApi.cookieUser](WidgetApi.cookieUser) method, and it renders
the widget if it is successful. Otherwise it shows the "error" widget.

**Parameters**

-   `config` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Config details
    -   `config.widgetType` **[WidgetType](#widgettype)** The content of the widget.
    -   `config.engagementMedium` **[EngagementMedium](#engagementmedium)** How to display the widget.
    -   `config.jwt` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the JSON Web Token (JWT) that is used to
                                   validate the data (can be disabled)

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[WidgetResult](#widgetresult)>** json object if true, with a Widget and user details.

### upsertUser

This function calls the [WidgetApi.upsertUser](WidgetApi.upsertUser) method, and it renders
the widget if it is successful. Otherwise it shows the "error" widget.

**Parameters**

-   `config` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Config details
    -   `config.user` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The user details
        -   `config.user.id` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The user id
        -   `config.user.accountId` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The user account id
    -   `config.widgetType` **[WidgetType](#widgettype)** The content of the widget.
    -   `config.engagementMedium` **[EngagementMedium](#engagementmedium)** How to display the widget.
    -   `config.jwt` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the JSON Web Token (JWT) that is used
                                   to validate the data (can be disabled)

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[WidgetResult](#widgetresult)>** json object if true, with a Widget and user details.

### render

This function calls the [WidgetApi.render](WidgetApi.render) method, and it renders
the widget if it is successful. Otherwise it shows the "error" widget.

**Parameters**

-   `config` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Config details
    -   `config.user` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The user details
        -   `config.user.id` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The user id
        -   `config.user.accountId` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The user account id
    -   `config.widgetType` **[WidgetType](#widgettype)** The content of the widget.
    -   `config.engagementMedium` **[EngagementMedium](#engagementmedium)** How to display the widget.
    -   `config.jwt` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the JSON Web Token (JWT) that is used
                                   to validate the data (can be disabled)

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[WidgetResult](#widgetresult)>** json object if true, with a Widget and user details.

### autofill

Autofills a referral code into an element when someone has been referred.
Uses [WidgetApi.squatchReferralCookie](WidgetApi.squatchReferralCookie) behind the scenes.

**Parameters**

-   `selector` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** Element class/id

Returns **void** 

### submitEmail

Overrides the default function that submits the user email. If you have
Security enabled, the email needs to be signed before it's submitted.

**Parameters**

-   `fn` **[function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** Callback function for the 'submit_email' event.

Returns **void** 

## EmbedWidget

**Extends Widget**

An EmbedWidget is displayed inline in part of your page.

To create an EmbedWidget use [Widgets](#widgets)

**Parameters**

-   `params`  
-   `elementId`   (optional, default `'squatchembed'`)

## PopupWidget

**Extends Widget**

The PopupWidget is used to display popups (also known as "Modals").
Popups widgets are rendered on top of other elements in a page.

To create a PopupWidget use [Widgets](#widgets)

**Parameters**

-   `params`  
-   `trigger`   (optional, default `'.squatchpop'`)

## CtaWidget

**Extends PopupWidget**

A CtaWidget is displayed on top of your page

To create a CtaWidget use [Widgets](#widgets)

**Parameters**

-   `params`  
-   `opts`  

### open

### close

## WidgetApi

The WidgetApi class is a wrapper around the Widget Endpoints of the SaaSquatch REST API.

**Parameters**

-   `config`  

### constructor

Initialize a new [WidgetApi](#widgetapi) instance.

**Parameters**

-   `config` **[ConfigOptions](#configoptions)** Config details

**Examples**

_Browser example_

```javascript
var squatchApi = new squatch.WidgetApi({tenantAlias:'test_12b5bo1b25125'});
```

_Browserify/Webpack example_

```javascript
var WidgetApi = require('@saasquatch/squatch-js').WidgetApi;
var squatchApi = new WidgetApi({tenantAlias:'test_12b5bo1b25125'});
```

_Babel+Browserify/Webpack example_

```javascript
import {WidgetApi} from '@saasquatch/squatch-js';
let squatchApi = new WidgetApi({tenantAlias:'test_12b5bo1b25125'});
```

### cookieUser

Creates/upserts an anonymous user.

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Parameters for request (optional, default `{widgetType:'',engagementMedium:'',jwt:''}`)
    -   `params.widgetType` **[WidgetType](#widgettype)** The content of the widget.
    -   `params.engagementMedium` **[EngagementMedium](#engagementmedium)** How to display the widget.
    -   `params.jwt` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the JSON Web Token (JWT) that is used to
                                   validate the data (can be disabled)

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** json object if true, with the widget template, jsOptions and user details.

### upsertUser

Creates/upserts user.

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Parameters for request (optional, default `{widgetType:'',engagementMedium:'',jwt:''}`)
    -   `params.user` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The user details
        -   `params.user.id` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The user id
        -   `params.user.accountId` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The user account id
    -   `params.widgetType` **[WidgetType](#widgettype)** The content of the widget.
    -   `params.engagementMedium` **[EngagementMedium](#engagementmedium)** How to display the widget.
    -   `params.jwt` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the JSON Web Token (JWT) that is used
                                   to validate the data (can be disabled)

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** string if true, with the widget template, jsOptions and user details.

### render

Description here.

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Parameters for request (optional, default `{widgetType:'',engagementMedium:'',jwt:''}`)
    -   `params.user` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The user details
        -   `params.user.id` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The user id
        -   `params.user.accountId` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The user account id
    -   `params.widgetType` **[WidgetType](#widgettype)** The content of the widget.
    -   `params.engagementMedium` **[EngagementMedium](#engagementmedium)** How to display the widget.
    -   `params.jwt` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the JSON Web Token (JWT) that is used
                                   to validate the data (can be disabled)

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** template html if true.

### invite

An API call to send out referral invites to contacts

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Parameters for request (optional, default `{emailList:[]}`)
    -   `params.emailList` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** The list of recipients to send to
    -   `params.userId` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The user id
    -   `params.accountId` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The user account id

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** an object containing total accepted / rejected emails send or error

### squatchReferralCookie

Looks up the referral code of the current user, if there is any.

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[json](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON)>** code referral code if true.
