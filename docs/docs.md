<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

# squatch

Squatch.js is the Referral SaaSquatch javascript SDK and a one-stop shop to integrate a referral program into your website or web app.
It can show referral widgets on any website, track users, generate unique referral short links and referral codes, and more.

# init

Initializes a static `squatch` global. This sets up:

-   `api` a static instance of the [WidgetApi](#widgetapi)

**Parameters**

-   `config` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Configuration details
    -   `config.tenantAlias` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The tenant alias connects to your account. Note: There are both _live_ and _test_ tenant aliases.

**Examples**

```javascript
squatch.init({tenantAlias:'test_basbtabstq51v'});
```

Returns **void** 

# api

Static instance of the [WidgetApi](#widgetapi). Make sure you call [init](#init) first

**Examples**

```javascript
squatch.init({tenantAlias:'test_basbtabstq51v'});
squatch.api.createUser({id:'123', accountId:'abc', firstName:'Tom'});
```

# WidgetApi

The WidgetApi class is a wrapper around the Widget Endpoints of the SaaSquatch REST API.

## constructor

Initialize a new [WidgetApi](#widgetapi) instance.

**Parameters**

-   `config` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Config details
    -   `config.tenantAlias` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The tenant to access
    -   `config.domain` **\[[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)]** The server domain.
           Useful if you want to use a proxy like [RequestBin](https://requestb.in/) or [Runscope](https://runscope.com/). (optional, default `'https://app.referralsaasquatch.com'`)

**Examples**

_Browser example_

```javascript
var squatchApi = new squatch.WidgetApi({tenantAlias:'test_12b5bo1b25125'});
```

_Browserify/Webpack example_

```javascript
var WidgetApi = require('squatch-js').WidgetApi;
var squatchApi = new WidgetApi({tenantAlias:'test_12b5bo1b25125'});
```

_Babel+Browserify/Webpack example_

```javascript
import {WidgetApi} from 'squatch-js';
let squatchApi = new WidgetApi({tenantAlias:'test_12b5bo1b25125'});
```

## cookieUser

Description here.

**Parameters**

-   `params` **\[[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)](default { widgetType: '', engagementMedium: '', jwt: '' })** 
    -   `params.widgetType` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** (REFERRED_WIDGET/CONVERSION_WIDGET)
    -   `params.engagementMedium` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** (POPUP/MOBILE)
    -   `params.jwt` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the JSON Web Token (JWT) that is used to
                                   validate the data (can be disabled)

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** json object if true, with the widget template, jsOptions and user details.

## upsert

Description here.

**Parameters**

-   `params` **\[[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)](default { widgetType: '', engagementMedium: '', jwt: '' })** 
    -   `params.user` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the user details
        -   `params.user.id` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
        -   `params.user.accountId` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
    -   `params.widgetType` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** (REFERRED_WIDGET/REFERRING_WIDGET)
    -   `params.engagementMedium` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** (POPUP/MOBILE)
    -   `params.jwt` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the JSON Web Token (JWT) that is used
                                   to validate the data (can be disabled)

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** string if true, with the widget template.

## render

Description here.

**Parameters**

-   `params` **\[[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)](default { widgetType: '', engagementMedium: '', jwt: '' })** 
    -   `params.user` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the user details
        -   `params.user.id` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
        -   `params.user.accountId` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
    -   `params.widgetType` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** (REFERRED_WIDGET/REFERRING_WIDGET)
    -   `params.engagementMedium` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** (POPUP/MOBILE)
    -   `params.jwt` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the JSON Web Token (JWT) that is used
                                   to validate the data (can be disabled)

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** template html if true.

## squatchReferralCookie

Description here.

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 
    -   `params.code` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the user details

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** code referral code if true.

# Widget

The Widget class is the base class for the different widget types available

**Examples**

_Custom Widget example_

```javascript
class CustomWidget extends Widget {
     constructor(params,stuff) {
       super(params);
       // do stuff
     }

     load() {
       // custom loading of widget
     }
   }
```

## constructor

Initialize a new [Widget](#widget) instance.

Creates an <iframe></iframe> in which the html content of the widget gets
embedded.
Uses element-resize-detector (<https://github.com/wnr/element-resize-detector>)
for listening to the height of the widget content and make the iframe responsive.

**Parameters**

-   `content` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The html of the widget
-   `params`  

# AnalyticsApi

The AnalyticsApi class is a wrapper around the Analytics Endpoints of
the SaaSquatch REST API. Used to record Widget events.

## constructor

Initialize a new [AnalyticsApi](#analyticsapi) instance.

**Parameters**

-   `config` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Config details
    -   `config.domain` **\[[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)]** The server domain. (optional, default `'https://app.referralsaasquatch.com'`)
