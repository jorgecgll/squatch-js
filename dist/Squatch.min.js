!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.squatch=t():e.squatch=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){e.tenant_alias.startsWith("test")&&m["default"].enable("squatch-js*"),g("initializing ..."),t.api=w=new c.WidgetApi({tenantAlias:e.tenant_alias}),g("Widget API instance"),g(w),w.cookieUser(e).then(function(t){g("cookie_user"),a(t,e)})["catch"](function(e){g("cookieUser() "+e)})}function i(e){e()}function a(e,t){var n=void 0,r=void 0,o=void 0,i=void 0;if(e.apiErrorCode?(g(new Error(e.apiErrorCode+" ("+e.rsCode+") "+e.message)),i={content:"error",rsCode:e.rsCode,type:t.widgetType?t.widgetType:"",eventBus:b,api:w}):i={content:e.template,type:t.widgetType?t.widgetType:e.jsOptions.widget.defaultWidgetType,eventBus:b,api:w},"EMBED"===t.engagementMedium)n=new u.EmbedWidget(i).load();else if("POPUP"===t.engagementMedium)r=new l.PopupWidget(i).load();else if("CTA"===t.engagementMedium){var a=e.jsOptions.cta.content.buttonSide,s=e.jsOptions.cta.content.buttonPosition;o=new d.CtaWidget(i,{side:a,position:s}).load()}else r=new l.PopupWidget(i).load()}Object.defineProperty(t,"__esModule",{value:!0}),t.api=t.eventBus=t.WidgetApi=t.OpenApi=void 0;var s=n(2);Object.defineProperty(t,"OpenApi",{enumerable:!0,get:function(){return s.OpenApi}});var c=n(15);Object.defineProperty(t,"WidgetApi",{enumerable:!0,get:function(){return c.WidgetApi}}),t.init=o,t.ready=i;var u=n(16),l=n(36),d=n(37),f=n(38),h=n(40),p=(r(h),n(33)),m=r(p),v=n(41),y=r(v);m["default"].disable("squatch-js*");var g=(0,m["default"])("squatch-js"),b=t.eventBus=y["default"],w=t.api=null;window&&(0,f.asyncLoad)()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.OpenApi=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3),s=n(13),c=r(s);n(14);t.OpenApi=function(){function e(t){o(this,e),this.tenantAlias=t.tenantAlias,this.domain="https://staging.referralsaasquatch.com"}return i(e,[{key:"createUser",value:function(e){this._validateInput(e,c["default"].user);var t=encodeURIComponent(this.tenantAlias),n=encodeURIComponent(e.accountId),r=encodeURIComponent(e.id),o="/api/v1/"+t+"/open/account/"+n+"/user/"+r,i=this.domain+o;return this._doPost(i,JSON.stringify(e),"application/json")}},{key:"upsertUser",value:function(e){console.log(e),this._validateInput(e,c["default"].user);var t=encodeURIComponent(this.tenantAlias),n=encodeURIComponent(e.accountId),r=encodeURIComponent(e.id),o="/api/v1/"+t+"/open/account/"+n+"/user/"+r,i=this.domain+o;return this._doPut(i,JSON.stringify(e),"application/json")}},{key:"createCookieUser",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"text/html",t=e,n=encodeURIComponent(this.tenantAlias),r="/api/v1/"+n+"/open/user/cookie_user",o=this.domain+r;return this._doPost(o,JSON.stringify({}),t)}},{key:"lookUpUser",value:function(e){this._validateInput(e,c["default"].userLookUp);var t=encodeURIComponent(this.tenantAlias),n=encodeURIComponent(e.accountId),r=encodeURIComponent(e.id),o="/api/v1/"+t+"/open/account/"+n+"/user/"+r,i=this.domain+o;return this._doRequest(i)}},{key:"getUserByReferralCode",value:function(e){this._validateInput(e,c["default"].userReferralCode);var t=encodeURIComponent(this.tenantAlias),n=encodeURIComponent(e.referralCode),r="/api/v1/"+t+"/open/user?referralCode="+n,o=this.domain+r;return this._doRequest(o)}},{key:"lookUpReferralCode",value:function(e){this._validateInput(e,c["default"].userReferralCode);var t=encodeURIComponent(this.tenantAlias),n=encodeURIComponent(e.referralCode),r="/api/v1/"+t+"/open/code/"+n,o=this.domain+r;return this._doRequest(o)}},{key:"applyReferralCode",value:function(e){this._validateInput(e,c["default"].applyReferralCode);var t=encodeURIComponent(this.tenantAlias),n=encodeURIComponent(e.referralCode),r=encodeURIComponent(e.accountId),o=encodeURIComponent(e.id),i="/api/v1/"+t+"/open/code/"+n+"/account/"+r+"/user/"+o,a=this.domain+i;return this._doPost(a,JSON.stringify(""),"application/json")}},{key:"listReferrals",value:function(){var e=encodeURIComponent(this.tenantAlias),t="/api/v1/"+e+"/open/referrals",n=this.domain+t;return this._doRequest(n)}},{key:"_validateInput",value:function(e,t){var n=(0,a.validate)(e,t);if(!n.valid)throw n.errors}},{key:"_doRequest",value:function(e){return fetch(e,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.json()})}},{key:"_doPost",value:function(e,t,n){return fetch(e,{method:"POST",headers:{Accept:n,"Content-Type":"application/json"},body:t}).then(function(e){return"text/html"===n?e.text():e.json()})}},{key:"_doPut",value:function(e,t,n){return fetch(e,{method:"PUT",headers:{Accept:n,"Content-Type":"application/json","X-SaaSquatch-User-Token":"JWT token"},credentials:"cors",body:t}).then(function(e){return"text/html"===n?e.text():e.json()})}}]),e}()},function(e,t,n){"use strict";var r=e.exports.Validator=n(4);e.exports.ValidatorResult=n(12).ValidatorResult,e.exports.ValidationError=n(12).ValidationError,e.exports.SchemaError=n(12).SchemaError,e.exports.validate=function(e,t,n){var o=new r;return o.validate(e,t,n)}},function(e,t,n){"use strict";var r=n(5),o=n(11),i=n(12),a=i.ValidatorResult,s=i.SchemaError,c=i.SchemaContext,u=function d(){this.customFormats=Object.create(d.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(l),this.attributes=Object.create(o.validators)};u.prototype.customFormats={},u.prototype.schemas=null,u.prototype.types=null,u.prototype.attributes=null,u.prototype.unresolvedRefs=null,u.prototype.addSchema=function(e,t){if(!e)return null;var n=t||e.id;return this.addSubSchema(n,e),n&&(this.schemas[n]=e),this.schemas[n]},u.prototype.addSubSchema=function(e,t){if(t&&"object"==typeof t){if(t.$ref){var n=r.resolve(e,t.$ref);return void(void 0===this.schemas[n]&&(this.schemas[n]=null,this.unresolvedRefs.push(n)))}var o=t.id&&r.resolve(e,t.id),a=o||e;if(o){if(this.schemas[o]){if(!i.deepCompareStrict(this.schemas[o],t))throw new Error("Schema <"+t+"> already exists with different definition");return this.schemas[o]}this.schemas[o]=t;var s=o.replace(/^([^#]*)#$/,"$1");this.schemas[s]=t}return this.addSubSchemaArray(a,t.items instanceof Array?t.items:[t.items]),this.addSubSchemaArray(a,t["extends"]instanceof Array?t["extends"]:[t["extends"]]),this.addSubSchema(a,t.additionalItems),this.addSubSchemaObject(a,t.properties),this.addSubSchema(a,t.additionalProperties),this.addSubSchemaObject(a,t.definitions),this.addSubSchemaObject(a,t.patternProperties),this.addSubSchemaObject(a,t.dependencies),this.addSubSchemaArray(a,t.disallow),this.addSubSchemaArray(a,t.allOf),this.addSubSchemaArray(a,t.anyOf),this.addSubSchemaArray(a,t.oneOf),this.addSubSchema(a,t.not),this.schemas[o]}},u.prototype.addSubSchemaArray=function(e,t){if(t instanceof Array)for(var n=0;n<t.length;n++)this.addSubSchema(e,t[n])},u.prototype.addSubSchemaObject=function(e,t){if(t&&"object"==typeof t)for(var n in t)this.addSubSchema(e,t[n])},u.prototype.setSchemas=function(e){this.schemas=e},u.prototype.getSchema=function(e){return this.schemas[e]},u.prototype.validate=function(e,t,n,o){n||(n={});var i=n.propertyName||"instance",a=r.resolve(n.base||"/",t.id||"");if(o||(o=new c(t,n,i,a,Object.create(this.schemas)),o.schemas[a]||(o.schemas[a]=t)),t){var u=this.validateSchema(e,t,n,o);if(!u)throw new Error("Result undefined");return u}throw new s("no schema specified",t)},u.prototype.validateSchema=function(e,t,n,r){function u(e){var t="string"==typeof e?e:e.$ref;return"string"==typeof t&&t}function l(e,t){var n;return(n=u(e))?d.resolve(e,n,t).subschema:e}var d=this,f=new a(e,t,n,r);if(!t)throw new Error("schema is undefined");t["extends"]&&(t["extends"]instanceof Array?t["extends"].forEach(function(e){t=i.deepMerge(t,l(e,r))}):t=i.deepMerge(t,l(t["extends"],r)));var h;if(h=u(t)){var p=this.resolve(t,h,r),m=new c(p.subschema,n,r.propertyPath,p.switchSchema,r.schemas);return this.validateSchema(e,p.subschema,n,m)}var v=n&&n.skipAttributes||[];for(var y in t)if(!o.ignoreProperties[y]&&v.indexOf(y)<0){var g=null,b=d.attributes[y];if(b)g=b.call(d,e,t,n,r);else if(n.allowUnknownAttributes===!1)throw new s("Unsupported attribute: "+y,t);g&&f.importErrors(g)}if("function"==typeof n.rewrite){var w=n.rewrite.call(this,e,t,n,r);f.instance=w}return f},u.prototype.resolve=function(e,t,n){if(t=n.resolve(t),n.schemas[t])return{subschema:n.schemas[t],switchSchema:t};var o=r.parse(t),a=o&&o.hash,c=a&&a.length&&t.substr(0,t.length-a.length);if(!c||!n.schemas[c])throw new s("no such schema <"+t+">",e);var u=i.objectGetPath(n.schemas[c],a.substr(1));if(void 0===u)throw new s("no such schema "+a+" located in <"+c+">",e);return{subschema:u,switchSchema:t}},u.prototype.testType=function(e,t,n,r,o){if("function"==typeof this.types[o])return this.types[o].call(this,e);if(o&&"object"==typeof o){var i=this.validateSchema(e,o,n,r);return void 0===i||!(i&&i.errors.length)}return!0};var l=u.prototype.types={};l.string=function(e){return"string"==typeof e},l.number=function(e){return"number"==typeof e&&isFinite(e)},l.integer=function(e){return"number"==typeof e&&e%1===0},l["boolean"]=function(e){return"boolean"==typeof e},l.array=function(e){return e instanceof Array},l["null"]=function(e){return null===e},l.date=function(e){return e instanceof Date},l.any=function(e){return!0},l.object=function(e){return e&&"object"==typeof e&&!(e instanceof Array)&&!(e instanceof Date)},e.exports=u},function(e,t,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,n){if(e&&u(e)&&e instanceof r)return e;var o=new r;return o.parse(e,t,n),o}function i(e){return c(e)&&(e=o(e)),e instanceof r?e.format():r.prototype.format.call(e)}function a(e,t){return o(e,!1,!0).resolve(t)}function s(e,t){return e?o(e,!1,!0).resolveObject(t):t}function c(e){return"string"==typeof e}function u(e){return"object"==typeof e&&null!==e}function l(e){return null===e}function d(e){return null==e}var f=n(6);t.parse=o,t.resolve=a,t.resolveObject=s,t.format=i,t.Url=r;var h=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,m=["<",">",'"',"`"," ","\r","\n","\t"],v=["{","}","|","\\","^","`"].concat(m),y=["'"].concat(v),g=["%","/","?",";","#"].concat(y),b=["/","?","#"],w=255,E=/^[a-z0-9A-Z_-]{0,63}$/,x=/^([a-z0-9A-Z_-]{0,63})(.*)$/,A={javascript:!0,"javascript:":!0},O={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},j=n(8);r.prototype.parse=function(e,t,n){if(!c(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e;r=r.trim();var o=h.exec(r);if(o){o=o[0];var i=o.toLowerCase();this.protocol=i,r=r.substr(o.length)}if(n||o||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===r.substr(0,2);!a||o&&O[o]||(r=r.substr(2),this.slashes=!0)}if(!O[o]&&(a||o&&!_[o])){for(var s=-1,u=0;u<b.length;u++){var l=r.indexOf(b[u]);l!==-1&&(s===-1||l<s)&&(s=l)}var d,p;p=s===-1?r.lastIndexOf("@"):r.lastIndexOf("@",s),p!==-1&&(d=r.slice(0,p),r=r.slice(p+1),this.auth=decodeURIComponent(d)),s=-1;for(var u=0;u<g.length;u++){var l=r.indexOf(g[u]);l!==-1&&(s===-1||l<s)&&(s=l)}s===-1&&(s=r.length),this.host=r.slice(0,s),r=r.slice(s),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var v=this.hostname.split(/\./),u=0,S=v.length;u<S;u++){var C=v[u];if(C&&!C.match(E)){for(var I="",k=0,P=C.length;k<P;k++)I+=C.charCodeAt(k)>127?"x":C[k];if(!I.match(E)){var T=v.slice(0,u),R=v.slice(u+1),U=C.match(x);U&&(T.push(U[1]),R.unshift(U[2])),R.length&&(r="/"+R.join(".")+r),this.hostname=T.join(".");break}}}if(this.hostname.length>w?this.hostname="":this.hostname=this.hostname.toLowerCase(),!m){for(var M=this.hostname.split("."),q=[],u=0;u<M.length;++u){var L=M[u];q.push(L.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(L):L)}this.hostname=q.join(".")}var z=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+z,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!A[i])for(var u=0,S=y.length;u<S;u++){var N=y[u],F=encodeURIComponent(N);F===N&&(F=escape(N)),r=r.split(N).join(F)}var D=r.indexOf("#");D!==-1&&(this.hash=r.substr(D),r=r.slice(0,D));var H=r.indexOf("?");if(H!==-1?(this.search=r.substr(H),this.query=r.substr(H+1),t&&(this.query=j.parse(this.query)),r=r.slice(0,H)):t&&(this.search="",this.query={}),r&&(this.pathname=r),_[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var z=this.pathname||"",L=this.search||"";this.path=z+L}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&u(this.query)&&Object.keys(this.query).length&&(i=j.stringify(this.query));var a=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||_[t])&&o!==!1?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+o+n+a+r},r.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(c(e)){var t=new r;t.parse(e,!1,!0),e=t}var n=new r;if(Object.keys(this).forEach(function(e){n[e]=this[e]},this),n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(n[t]=e[t])}),_[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(e.protocol&&e.protocol!==n.protocol){if(!_[e.protocol])return Object.keys(e).forEach(function(t){n[t]=e[t]}),n.href=n.format(),n;if(n.protocol=e.protocol,e.host||O[e.protocol])n.pathname=e.pathname;else{for(var o=(e.pathname||"").split("/");o.length&&!(e.host=o.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),n.pathname=o.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var i=n.pathname||"",a=n.search||"";n.path=i+a}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var s=n.pathname&&"/"===n.pathname.charAt(0),u=e.host||e.pathname&&"/"===e.pathname.charAt(0),f=u||s||n.host&&e.pathname,h=f,p=n.pathname&&n.pathname.split("/")||[],o=e.pathname&&e.pathname.split("/")||[],m=n.protocol&&!_[n.protocol];if(m&&(n.hostname="",n.port=null,n.host&&(""===p[0]?p[0]=n.host:p.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===o[0]?o[0]=e.host:o.unshift(e.host)),e.host=null),f=f&&(""===o[0]||""===p[0])),u)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,p=o;else if(o.length)p||(p=[]),p.pop(),p=p.concat(o),n.search=e.search,n.query=e.query;else if(!d(e.search)){if(m){n.hostname=n.host=p.shift();var v=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");v&&(n.auth=v.shift(),n.host=n.hostname=v.shift())}return n.search=e.search,n.query=e.query,l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!p.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var y=p.slice(-1)[0],g=(n.host||e.host)&&("."===y||".."===y)||""===y,b=0,w=p.length;w>=0;w--)y=p[w],"."==y?p.splice(w,1):".."===y?(p.splice(w,1),b++):b&&(p.splice(w,1),b--);if(!f&&!h)for(;b--;b)p.unshift("..");!f||""===p[0]||p[0]&&"/"===p[0].charAt(0)||p.unshift(""),g&&"/"!==p.join("/").substr(-1)&&p.push("");var E=""===p[0]||p[0]&&"/"===p[0].charAt(0);if(m){n.hostname=n.host=E?"":p.length?p.shift():"";var v=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");v&&(n.auth=v.shift(),n.host=n.hostname=v.shift())}return f=f||n.host&&p.length,f&&!E&&p.unshift(""),p.length?n.pathname=p.join("/"):(n.pathname=null,n.path=null),l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=p.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){var r;(function(e,o){!function(i){function a(e){throw RangeError(T[e])}function s(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function c(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(P,".");var o=e.split("."),i=s(o,t).join(".");return r+i}function u(e){for(var t,n,r=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(n=e.charCodeAt(o++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--)):r.push(t);return r}function l(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=M(e>>>10&1023|55296),e=56320|1023&e),t+=M(e)}).join("")}function d(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:E}function f(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function h(e,t,n){var r=0;for(e=n?U(e/_):e>>1,e+=U(e/t);e>R*A>>1;r+=E)e=U(e/R);return U(r+(R+1)*e/(e+O))}function p(e){var t,n,r,o,i,s,c,u,f,p,m=[],v=e.length,y=0,g=S,b=j;for(n=e.lastIndexOf(C),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&a("not-basic"),m.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<v;){for(i=y,s=1,c=E;o>=v&&a("invalid-input"),u=d(e.charCodeAt(o++)),(u>=E||u>U((w-y)/s))&&a("overflow"),y+=u*s,f=c<=b?x:c>=b+A?A:c-b,!(u<f);c+=E)p=E-f,s>U(w/p)&&a("overflow"),s*=p;t=m.length+1,b=h(y-i,t,0==i),U(y/t)>w-g&&a("overflow"),g+=U(y/t),y%=t,m.splice(y++,0,g)}return l(m)}function m(e){var t,n,r,o,i,s,c,l,d,p,m,v,y,g,b,O=[];for(e=u(e),v=e.length,t=S,n=0,i=j,s=0;s<v;++s)m=e[s],m<128&&O.push(M(m));for(r=o=O.length,o&&O.push(C);r<v;){for(c=w,s=0;s<v;++s)m=e[s],m>=t&&m<c&&(c=m);for(y=r+1,c-t>U((w-n)/y)&&a("overflow"),n+=(c-t)*y,t=c,s=0;s<v;++s)if(m=e[s],m<t&&++n>w&&a("overflow"),m==t){for(l=n,d=E;p=d<=i?x:d>=i+A?A:d-i,!(l<p);d+=E)b=l-p,g=E-p,O.push(M(f(p+b%g,0))),l=U(b/g);O.push(M(f(l,0))),i=h(n,y,r==o),n=0,++r}++n,++t}return O.join("")}function v(e){return c(e,function(e){return I.test(e)?p(e.slice(4).toLowerCase()):e})}function y(e){return c(e,function(e){return k.test(e)?"xn--"+m(e):e})}var g=("object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof o&&o);g.global!==g&&g.window!==g&&g.self!==g||(i=g);var b,w=2147483647,E=36,x=1,A=26,O=38,_=700,j=72,S=128,C="-",I=/^xn--/,k=/[^\x20-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=E-x,U=Math.floor,M=String.fromCharCode;b={version:"1.3.2",ucs2:{decode:u,encode:l},decode:p,encode:m,toASCII:y,toUnicode:v},r=function(){return b}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(this)}).call(t,n(7)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,n){"use strict";t.decode=t.parse=n(9),t.encode=t.stringify=n(10)},function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(t);var s=1e3;o&&"number"==typeof o.maxKeys&&(s=o.maxKeys);var c=e.length;s>0&&c>s&&(c=s);for(var u=0;u<c;++u){var l,d,f,h,p=e[u].replace(a,"%20"),m=p.indexOf(r);m>=0?(l=p.substr(0,m),d=p.substr(m+1)):(l=p,d=""),f=decodeURIComponent(l),h=decodeURIComponent(d),n(i,f)?Array.isArray(i[f])?i[f].push(h):i[f]=[i[f],h]:i[f]=h}return i}},function(e,t){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,o){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(o){var i=encodeURIComponent(n(o))+r;return Array.isArray(e[o])?e[o].map(function(e){return i+encodeURIComponent(n(e))}).join(t):i+encodeURIComponent(n(e[o]))}).join(t):o?encodeURIComponent(n(o))+r+encodeURIComponent(n(e)):""}},function(e,t,n){"use strict";function r(e,t,n,r){return this.validateSchema(e,r,t,n).valid}function o(e,t,n,r,o,i){if(!t.properties||void 0===t.properties[o])if(t.additionalProperties===!1)i.addError({name:"additionalProperties",argument:o,message:"additionalProperty "+JSON.stringify(o)+" exists in instance when not allowed"});else{var a=t.additionalProperties||{},s=this.validateSchema(e[o],a,n,r.makeChild(a,o));s.instance!==i.instance[o]&&(i.instance[o]=s.instance),i.importErrors(s)}}function i(e,t,n){var r,o=n.length;for(r=t+1,o;r<o;r++)if(a.deepCompareStrict(e,n[r]))return!1;return!0}var a=n(12),s=a.ValidatorResult,c=a.SchemaError,u={};u.ignoreProperties={id:!0,"default":!0,description:!0,title:!0,exclusiveMinimum:!0,exclusiveMaximum:!0,additionalItems:!0,$schema:!0,$ref:!0,"extends":!0};var l=u.validators={};l.type=function(e,t,n,r){if(void 0===e)return null;var o=new s(e,t,n,r),i=t.type instanceof Array?t.type:[t.type];if(!i.some(this.testType.bind(this,e,t,n,r))){var a=i.map(function(e){return e.id&&"<"+e.id+">"||e+""});o.addError({name:"type",argument:a,message:"is not of a type(s) "+a})}return o},l.anyOf=function(e,t,n,o){if(void 0===e)return null;var i=new s(e,t,n,o);if(!(t.anyOf instanceof Array))throw new c("anyOf must be an array");if(!t.anyOf.some(r.bind(this,e,n,o))){var a=t.anyOf.map(function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"});i.addError({name:"anyOf",argument:a,message:"is not any of "+a.join(",")})}return i},l.allOf=function(e,t,n,r){if(void 0===e)return null;if(!(t.allOf instanceof Array))throw new c("allOf must be an array");var o=new s(e,t,n,r),i=this;return t.allOf.forEach(function(t,a){var s=i.validateSchema(e,t,n,r);if(!s.valid){var c=t.id&&"<"+t.id+">"||t.title&&JSON.stringify(t.title)||t.$ref&&"<"+t.$ref+">"||"[subschema "+a+"]";o.addError({name:"allOf",argument:{id:c,length:s.errors.length,valid:s},message:"does not match allOf schema "+c+" with "+s.errors.length+" error[s]:"}),o.importErrors(s)}}),o},l.oneOf=function(e,t,n,o){if(void 0===e)return null;if(!(t.oneOf instanceof Array))throw new c("oneOf must be an array");var i=new s(e,t,n,o),a=t.oneOf.filter(r.bind(this,e,n,o)).length,u=t.oneOf.map(function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"});return 1!==a&&i.addError({name:"oneOf",argument:u,message:"is not exactly one from "+u.join(",")}),i},l.properties=function(e,t,n,r){if(void 0!==e&&e instanceof Object){var o=new s(e,t,n,r),i=t.properties||{};for(var a in i){var c=(e||void 0)&&e[a],u=this.validateSchema(c,i[a],n,r.makeChild(i[a],a));u.instance!==o.instance[a]&&(o.instance[a]=u.instance),o.importErrors(u)}return o}},l.patternProperties=function(e,t,n,r){if(void 0!==e&&this.types.object(e)){var i=new s(e,t,n,r),a=t.patternProperties||{};for(var c in e){var u=!0;for(var l in a){var d=new RegExp(l);if(d.test(c)){u=!1;var f=this.validateSchema(e[c],a[l],n,r.makeChild(a[l],c));f.instance!==i.instance[c]&&(i.instance[c]=f.instance),i.importErrors(f)}}u&&o.call(this,e,t,n,r,c,i)}return i}},l.additionalProperties=function(e,t,n,r){if(void 0!==e&&this.types.object(e)){if(t.patternProperties)return null;var i=new s(e,t,n,r);for(var a in e)o.call(this,e,t,n,r,a,i);return i}},l.minProperties=function(e,t,n,r){if(!e||"object"!=typeof e)return null;var o=new s(e,t,n,r),i=Object.keys(e);return i.length>=t.minProperties||o.addError({name:"minProperties",argument:t.minProperties,message:"does not meet minimum property length of "+t.minProperties}),o},l.maxProperties=function(e,t,n,r){if(!e||"object"!=typeof e)return null;var o=new s(e,t,n,r),i=Object.keys(e);return i.length<=t.maxProperties||o.addError({name:"maxProperties",argument:t.maxProperties,message:"does not meet maximum property length of "+t.maxProperties}),o},l.items=function(e,t,n,r){if(!(e instanceof Array))return null;var o=this,i=new s(e,t,n,r);return void 0!==e&&t.items?(e.every(function(e,a){var s=t.items instanceof Array?t.items[a]||t.additionalItems:t.items;if(void 0===s)return!0;if(s===!1)return i.addError({name:"items",message:"additionalItems not permitted"}),!1;var c=o.validateSchema(e,s,n,r.makeChild(s,a));return c.instance!==i.instance[a]&&(i.instance[a]=c.instance),i.importErrors(c),!0}),i):i},l.minimum=function(e,t,n,r){if("number"!=typeof e)return null;var o=new s(e,t,n,r),i=!0;return i=t.exclusiveMinimum&&t.exclusiveMinimum===!0?e>t.minimum:e>=t.minimum,i||o.addError({name:"minimum",argument:t.minimum,message:"must have a minimum value of "+t.minimum}),o},l.maximum=function(e,t,n,r){if("number"!=typeof e)return null;var o,i=new s(e,t,n,r);return o=t.exclusiveMaximum&&t.exclusiveMaximum===!0?e<t.maximum:e<=t.maximum,o||i.addError({name:"maximum",argument:t.maximum,message:"must have a maximum value of "+t.maximum}),i},l.divisibleBy=function(e,t,n,r){if("number"!=typeof e)return null;if(0==t.divisibleBy)throw new c("divisibleBy cannot be zero");var o=new s(e,t,n,r);return e/t.divisibleBy%1&&o.addError({name:"divisibleBy",argument:t.divisibleBy,message:"is not divisible by (multiple of) "+JSON.stringify(t.divisibleBy)}),o},l.multipleOf=function(e,t,n,r){if("number"!=typeof e)return null;if(0==t.multipleOf)throw new c("multipleOf cannot be zero");var o=new s(e,t,n,r);return e/t.multipleOf%1&&o.addError({name:"multipleOf",argument:t.multipleOf,message:"is not a multiple of (divisible by) "+JSON.stringify(t.multipleOf)}),o},l.required=function(e,t,n,r){var o=new s(e,t,n,r);return void 0===e&&t.required===!0?o.addError({name:"required",message:"is required"}):e&&"object"==typeof e&&Array.isArray(t.required)&&t.required.forEach(function(t){void 0===e[t]&&o.addError({name:"required",argument:t,message:"requires property "+JSON.stringify(t)})}),o},l.pattern=function(e,t,n,r){if("string"!=typeof e)return null;var o=new s(e,t,n,r);return e.match(t.pattern)||o.addError({name:"pattern",argument:t.pattern,message:"does not match pattern "+JSON.stringify(t.pattern)}),o},l.format=function(e,t,n,r){var o=new s(e,t,n,r);return o.disableFormat||a.isFormat(e,t.format,this)||o.addError({name:"format",argument:t.format,message:"does not conform to the "+JSON.stringify(t.format)+" format"}),o},l.minLength=function(e,t,n,r){if("string"!=typeof e)return null;var o=new s(e,t,n,r);return e.length>=t.minLength||o.addError({name:"minLength",argument:t.minLength,message:"does not meet minimum length of "+t.minLength}),o},l.maxLength=function(e,t,n,r){if("string"!=typeof e)return null;var o=new s(e,t,n,r);return e.length<=t.maxLength||o.addError({name:"maxLength",argument:t.maxLength,message:"does not meet maximum length of "+t.maxLength}),o},l.minItems=function(e,t,n,r){if(!(e instanceof Array))return null;var o=new s(e,t,n,r);return e.length>=t.minItems||o.addError({name:"minItems",argument:t.minItems,message:"does not meet minimum length of "+t.minItems}),o},l.maxItems=function(e,t,n,r){if(!(e instanceof Array))return null;var o=new s(e,t,n,r);return e.length<=t.maxItems||o.addError({name:"maxItems",argument:t.maxItems,message:"does not meet maximum length of "+t.maxItems}),o},l.uniqueItems=function(e,t,n,r){function o(e,t,n){for(var r=t+1;r<n.length;r++)if(a.deepCompareStrict(e,n[r]))return!1;return!0}var i=new s(e,t,n,r);return e instanceof Array?(e.every(o)||i.addError({name:"uniqueItems",message:"contains duplicate item"}),i):i},l.uniqueItems=function(e,t,n,r){if(!(e instanceof Array))return null;var o=new s(e,t,n,r);return e.every(i)||o.addError({name:"uniqueItems",message:"contains duplicate item"}),o},l.dependencies=function(e,t,n,r){if(!e||"object"!=typeof e)return null;var o=new s(e,t,n,r);for(var i in t.dependencies)if(void 0!==e[i]){var a=t.dependencies[i],c=r.makeChild(a,i);if("string"==typeof a&&(a=[a]),a instanceof Array)a.forEach(function(t){void 0===e[t]&&o.addError({name:"dependencies",argument:c.propertyPath,message:"property "+t+" not found, required by "+c.propertyPath})});else{var u=this.validateSchema(e,a,n,c);o.instance!==u.instance&&(o.instance=u.instance),u&&u.errors.length&&(o.addError({name:"dependencies",argument:c.propertyPath,message:"does not meet dependency required by "+c.propertyPath}),o.importErrors(u))}}return o},l["enum"]=function(e,t,n,r){if(!(t["enum"]instanceof Array))throw new c("enum expects an array",t);if(void 0===e)return null;var o=new s(e,t,n,r);return t["enum"].some(a.deepCompareStrict.bind(null,e))||o.addError({name:"enum",argument:t["enum"],message:"is not one of enum values: "+t["enum"].join(",")}),o},l.not=l.disallow=function(e,t,n,r){var o=this;if(void 0===e)return null;var i=new s(e,t,n,r),a=t.not||t.disallow;return a?(a instanceof Array||(a=[a]),a.forEach(function(a){if(o.testType(e,t,n,r,a)){var s=a&&a.id&&"<"+a.id+">"||a;i.addError({name:"not",argument:s,message:"is of prohibited type "+s})}}),i):null},e.exports=u},function(e,t,n){"use strict";var r=n(5),o=t.ValidationError=function(e,t,n,r,o,i){r&&(this.property=r),e&&(this.message=e),n&&(n.id?this.schema=n.id:this.schema=n),t&&(this.instance=t),this.name=o,this.argument=i,this.stack=this.toString()};o.prototype.toString=function(){return this.property+" "+this.message};var i=t.ValidatorResult=function(e,t,n,r){this.instance=e,this.schema=t,this.propertyPath=r.propertyPath,this.errors=[],this.throwError=n&&n.throwError,this.disableFormat=n&&n.disableFormat===!0};i.prototype.addError=function(e){var t;if("string"==typeof e)t=new o(e,this.instance,this.schema,this.propertyPath);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");t=new o(e.message,this.instance,this.schema,this.propertyPath,e.name,e.argument)}if(this.throwError)throw t;return this.errors.push(t),t},i.prototype.importErrors=function(e){if("string"==typeof e||e&&e.validatorType)this.addError(e);else if(e&&e.errors){var t=this.errors;e.errors.forEach(function(e){t.push(e)})}},i.prototype.toString=function(e){return this.errors.map(function(e,t){return t+": "+e.toString()+"\n"}).join("")},Object.defineProperty(i.prototype,"valid",{get:function(){return!this.errors.length}});var a=t.SchemaError=function l(e,t){this.message=e,this.schema=t,Error.call(this,e),Error.captureStackTrace(this,l)};a.prototype=Object.create(Error.prototype,{constructor:{value:a,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var s=t.SchemaContext=function(e,t,n,r,o){this.schema=e,this.options=t,this.propertyPath=n,this.base=r,this.schemas=o};s.prototype.resolve=function(e){return r.resolve(this.base,e)},s.prototype.makeChild=function(e,t){var n=void 0===t?this.propertyPath:this.propertyPath+u(t),o=r.resolve(this.base,e.id||""),i=new s(e,this.options,n,o,Object.create(this.schemas));
return e.id&&!i.schemas[o]&&(i.schemas[o]=e),i};var c=t.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(e){return"string"==typeof e&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)},regex:function(e){var t=!0;try{new RegExp(e)}catch(n){t=!1}return t},style:/\s*(.+?):\s*([^;]+);?/g,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};c.regexp=c.regex,c.pattern=c.regex,c.ipv4=c["ip-address"],t.isFormat=function(e,t,n){if("string"==typeof e&&void 0!==c[t]){if(c[t]instanceof RegExp)return c[t].test(e);if("function"==typeof c[t])return c[t](e)}else if(n&&n.customFormats&&"function"==typeof n.customFormats[t])return n.customFormats[t](e);return!0};var u=t.makeSuffix=function(e){return e=e.toString(),e.match(/[.\s\[\]]/)||e.match(/^[\d]/)?e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]":"."+e};t.deepCompareStrict=function d(e,t){if(typeof e!=typeof t)return!1;if(e instanceof Array)return t instanceof Array&&(e.length===t.length&&e.every(function(n,r){return d(e[r],t[r])}));if("object"==typeof e){if(!e||!t)return e===t;var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(function(n){return d(e[n],t[n])})}return e===t},e.exports.deepMerge=function f(e,t){var n=Array.isArray(t),r=n&&[]||{};return n?(e=e||[],r=r.concat(e),t.forEach(function(t,n){"object"==typeof t?r[n]=f(e[n],t):e.indexOf(t)===-1&&r.push(t)})):(e&&"object"==typeof e&&Object.keys(e).forEach(function(t){r[t]=e[t]}),Object.keys(t).forEach(function(n){"object"==typeof t[n]&&t[n]&&e[n]?r[n]=f(e[n],t[n]):r[n]=t[n]})),r},t.objectGetPath=function(e,t){for(var n,r=t.split("/").slice(1);"string"==typeof(n=r.shift());){var o=decodeURIComponent(n.replace(/~0/,"~").replace(/~1/g,"/"));if(!(o in e))return;e=e[o]}return e},t.encodePath=function(e){return e.map(function(e){return"/"+encodeURIComponent(e).replace(/~/g,"%7E")}).join("")}},function(e,t){e.exports={user:{type:"object",properties:{id:{type:"string"},accountId:{type:"string"},email:{type:"string"},firstName:{type:"string"},lastName:{type:"string"},imageUrl:{type:"string"},referralCode:{type:"string"},locale:{type:"string"}},required:["id","accountId"]},userLookUp:{type:"object",properties:{id:{type:"string"},accountId:{type:"string"}},required:["id","accountId"]},userReferralCode:{type:"object",properties:{referralCode:{type:"string"}},required:["referralCode"]},applyReferralCode:{type:"object",properties:{id:{type:"string"},accountId:{type:"string"},referralCode:{type:"string"}},required:["id","accountId","referralCode"]},cookieUser:{type:"object",properties:{widgetType:{type:"string","default":""},engagementMedium:{type:"string","default":""}}},upsertUser:{type:"object",properties:{user:{type:"object",properties:{id:{type:"string"},accountId:{type:"string"},email:{type:"string"},firstName:{type:"string"},lastName:{type:"string"},imageUrl:{type:"string"},referredBy:{type:"object",properties:{code:{type:"string"},isConverted:{type:"boolean"}}},locale:{type:"string"},paymentProviderId:{type:"string"}},required:["id","accountId"]},widgetType:{type:"string","default":""},engagementMedium:{type:"string","default":""}},required:["user"]}}},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return m.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader;return t.readAsArrayBuffer(e),a(t)}function c(e){var t=new FileReader;return t.readAsText(e),a(t)}function u(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(m.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(m.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob?(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(s)},this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return c(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=i(this);return e?e:Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(e){var t=e.toUpperCase();return v.indexOf(t)>-1?t:e}function d(e,t){t=t||{};var n=t.body;if(d.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,n||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=l(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function f(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function h(e){var t=new o,n=(e.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(e){var n=e.trim().split(":"),r=n.shift().trim(),o=n.join(":").trim();t.append(r,o)}),t}function p(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof o?t.headers:new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var m={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};o.prototype.append=function(e,r){e=t(e),r=n(r);var o=this.map[e];o||(o=[],this.map[e]=o),o.push(r)},o.prototype["delete"]=function(e){delete this.map[t(e)]},o.prototype.get=function(e){var n=this.map[t(e)];return n?n[0]:null},o.prototype.getAll=function(e){return this.map[t(e)]||[]},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,r){this.map[t(e)]=[n(r)]},o.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){e.call(t,r,n,this)},this)},this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},m.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this)},u.call(d.prototype),u.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},p.error=function(){var e=new p(null,{status:0,statusText:""});return e.type="error",e};var y=[301,302,303,307,308];p.redirect=function(e,t){if(y.indexOf(t)===-1)throw new RangeError("Invalid status code");return new p(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=d,e.Response=p,e.fetch=function(e,t){return new Promise(function(n,r){function o(){return"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0}var i;i=d.prototype.isPrototypeOf(e)&&!t?e:new d(e,t);var a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:h(a),url:o()},t="response"in a?a.response:a.responseText;n(new p(t,e))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials&&(a.withCredentials=!0),"responseType"in a&&m.blob&&(a.responseType="blob"),i.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetApi=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3),s=n(13),c=r(s);n(14);t.WidgetApi=function(){function e(t){o(this,e),this.tenantAlias=t.tenantAlias,this.domain="https://staging.referralsaasquatch.com"}return i(e,[{key:"cookieUser",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{widgetType:"",engagementMedium:"",jwt:""};this._validateInput(e,c["default"].cookieUser);var t=encodeURIComponent(this.tenantAlias),n=e.widgetType?"?widgetType="+encodeURIComponent(e.widgetType):"",r=e.engagementMedium?(n?"&":"?")+"engagementMedium="+encodeURIComponent(e.engagementMedium):"",o=n+r,i="/api/v1/"+t+"/widget/user/cookie_user"+o,a=this.domain+i;return this._doPut(a,e.user?JSON.stringify(e.user):JSON.stringify({}),e.jwt)}},{key:"upsert",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{widgetType:"",engagementMedium:"",jwt:""};this._validateInput(e,c["default"].upsertUser);var t=encodeURIComponent(this.tenantAlias),n=encodeURIComponent(e.user.accountId),r=encodeURIComponent(e.user.id),o=e.widgetType?"?widgetType="+encodeURIComponent(e.widgetType):"",i=e.engagementMedium?(o?"&":"?")+"engagementMedium="+encodeURIComponent(e.engagementMedium):"",a=o+i,s="/api/v1/"+t+"/widget/account/"+n+"/user/"+r+"/upsert"+a,u=this.domain+s;return this._doPut(u,JSON.stringify(e.user),e.jwt)}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{widgetType:"",engagementMedium:"",jwt:""};this._validateInput(e,c["default"].upsertUser);var t=encodeURIComponent(this.tenantAlias),n=encodeURIComponent(e.user.accountId),r=encodeURIComponent(e.user.id),o=e.widgetType?"?widgetType="+encodeURIComponent(e.widgetType):"",i=e.engagementMedium?(o?"&":"?")+"engagementMedium="+encodeURIComponent(e.engagementMedium):"",a=o+i,s="/api/v1/"+t+"/widget/account/"+n+"/user/"+r+"/render"+a,u=this.domain+s;return this._doRequest(u,e.jwt)}},{key:"_validateInput",value:function(e,t){var n=(0,a.validate)(e,t);if(!n.valid)throw n.errors}},{key:"_doRequest",value:function(e,t){var n={Accept:"application/json","Content-Type":"application/json"};return t&&(n["X-SaaSquatch-User-Token"]=t),fetch(e,{method:"GET",headers:n,credentials:"include",mode:"cors"}).then(function(e){return e.ok?e.text():e.json()})}},{key:"_doPut",value:function(e,t,n){var r={Accept:"application/json","Content-Type":"application/json"};return n&&(r["X-SaaSquatch-User-Token"]=n),fetch(e,{method:"PUT",headers:r,credentials:"include",body:t}).then(function(e){return e.json()})}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EmbedWidget=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function p(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},u=n(17),l=n(18),d=n(33),f=r(d),h=(0,f["default"])("squatch-js:EMBEDwidget");t.EmbedWidget=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"squatchembed";o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(r.element=document.getElementById(n),!r.element)throw new Error("elementId '"+n+"' not found.");return r}return a(t,e),s(t,[{key:"load",value:function(){var e=this;e.element.firstChild||e.element.appendChild(e.frame);var t=e.frame.contentWindow.document;t.open(),t.write(e.content),t.close(),(0,l.domready)(t,function(){var n=e.frame.contentWindow.squatch,r=t.getElementById("cta");r&&r.parentNode.removeChild(r),e.frame.height=t.body.scrollHeight,e.erd.listenTo(t.getElementsByClassName("squatch-container"),function(t){var n=t.offsetHeight;e.frame.height=n}),e._loadEvent(n),h("loaded")})}},{key:"reload",value:function(e,n){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reload",this).call(this,e,n);var r=this;r.widgetApi.cookieUser({user:{email:e},engagementMedium:"EMBED",widgetType:r.type,jwt:n}).then(function(e){e.template&&(r.content=e.template,r.load())})["catch"](function(e){h("Failed to reload "+e)})}},{key:"_error",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"embed",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_error",this).call(this,e,n,r)}}]),t}(u.Widget)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=(n(18),n(19)),s=(n(15),n(20)),c=r(s),u=n(33),l=r(u),d=(0,l["default"])("squatch-js:widget");t.Widget=function(){function e(t){o(this,e),d("widget initializing ...");var n=this;n.eventBus=t.eventBus,n.content="error"===t.content?n._error(t.rsCode):t.content,n.type=t.type,n.widgetApi=t.api,n.analyticsApi=new a.AnalyticsApi,n.frame=document.createElement("iframe"),n.frame.width="100%",n.frame.style="border: 0; background-color: none;",n.erd=(0,c["default"])({strategy:"scroll"}),n.eventBus.addEventListener("fb_btn_clicked",function(e,t,n){d("fb btn clicked"),d("param1",t),d("param2",n)}),n.eventBus.addEventListener("tw_btn_clicked",function(e){d("tw btn clicked")}),n.eventBus.addEventListener("email_btn_clicked",function(e){d("email btn clicked")}),n.eventBus.addEventListener("copy_btn_clicked",function(e){d("copy btn clicked")}),n.eventBus.addEventListener("email_submitted",function(e,t,r){d("email_submitted"),n.reload(t,r)})}return i(e,[{key:"reload",value:function(e,t){d("Reload after email - "+e+" is submitted")}},{key:"_loadEvent",value:function(e){e&&this.analyticsApi.pushAnalyticsLoadEvent({tenantAlias:e.analytics.attributes.tenant,externalAccountId:e.analytics.attributes.accountId,externalUserId:e.analytics.attributes.userId,engagementMedium:e.mode.widgetMode}).then(function(t){d(e.mode.widgetMode+" loaded event recorded")})["catch"](function(e){d(new Error("pushAnalyticsLoadEvent() "+e))})}},{key:"_shareEvent",value:function(e,t){e&&this.analyticsApi.pushAnalyticsShareClickedEvent({tenantAlias:e.analytics.attributes.tenant,externalAccountId:e.analytics.attributes.accountId,externalUserId:e.analytics.attributes.userId,engagementMedium:e.mode.widgetMode,shareMedium:t}).then(function(n){d(e.mode.widgetMode+" share "+t+" event recorded")})["catch"](function(e){d(new Error("pushAnalyticsLoadEvent() "+e))})}},{key:"_error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"modal",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return'<!DOCTYPE html>\n    <!--[if IE 7]><html class="ie7 oldie" lang="en"><![endif]-->\n    <!--[if IE 8]><html class="ie8 oldie" lang="en"><![endif]-->\n    <!--[if gt IE 8]><!--><html lang="en"><!--<![endif]-->\n    <head>\n    \t<link rel="stylesheet" media="all" href="https://d35vcmgdka52pk.cloudfront.net/assets/css/widget/errorpage.min.css">\n      <style>\n        '+n+'\n      </style>\n    </head>\n    <body>\n\n      <div class="squatch-container '+t+'">\n        <div class="errorheader">\n          <button type="button" class="close" onclick="window.parent.squatch.eventBus.dispatch(\'close_popup\');">&times;</button>\n          <p class="errortitle">Error</p>\n        </div>\n        <div class="errorbody">\n          <div class="sadface"><img src="https://d35vcmgdka52pk.cloudfront.net/assets/images/face.png"></div>\n          <h4>Our referral program is temporarily unavailable.</h4><br>\n          <p>Please reload the page or check back later.</p>\n          <p>If the persists please contact our support team.</p>\n          <br>\n          <br>\n          <div class="right-align errtxt">\n            Error Code: '+e+"\n          </div>\n        </div>\n      </div>\n    </body>\n    </html>"}}]),e}()},function(e,t){"use strict";function n(e,t){var n=[],r=void 0,o=e,i=o.documentElement.doScroll,a="DOMContentLoaded",s=(i?/^loaded|^c/:/^loaded|^i|^c/).test(o.readyState);return s||o.addEventListener(a,r=function(){for(o.removeEventListener(a,r),s=1;r=n.shift();)r()}),s?setTimeout(t,0):n.push(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.domready=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsApi=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(14);t.AnalyticsApi=function(){function e(t){r(this,e),this.domain="https://staging.referralsaasquatch.com"}return o(e,[{key:"pushAnalyticsLoadEvent",value:function(e){var t=encodeURIComponent(e.tenantAlias),n=encodeURIComponent(e.externalAccountId),r=encodeURIComponent(e.externalUserId),o=encodeURIComponent(e.engagementMedium),i="/a/"+t+"/widgets/analytics/loaded?externalAccountId="+n+"&externalUserId="+r+"&engagementMedium="+o,a=this.domain+i;return this._doPost(a,JSON.stringify({}))}},{key:"pushAnalyticsShareClickedEvent",value:function(e){var t=encodeURIComponent(e.tenantAlias),n=encodeURIComponent(e.externalAccountId),r=encodeURIComponent(e.externalUserId),o=encodeURIComponent(e.engagementMedium),i=encodeURIComponent(e.shareMedium),a="/a/"+t+"/widgets/analytics/loaded?externalAccountId="+n+"&externalUserId="+r+"&engagementMedium="+o+"&shareMedium="+i,s=this.domain+a;return this._doPost(s,e)}},{key:"_doPost",value:function(e,t){return fetch(e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:t}).then(function(e){return e.text()})}}]),e}()},function(e,t,n){"use strict";function r(e){return Array.isArray(e)||void 0!==e.length}function o(e){if(Array.isArray(e))return e;var t=[];return s(e,function(e){t.push(e)}),t}function i(e){return e&&1===e.nodeType}function a(e,t,n){var r=e[t];return void 0!==r&&null!==r||void 0===n?r:n}var s=n(21).forEach,c=n(22),u=n(23),l=n(24),d=n(25),f=n(26),h=n(27),p=n(28),m=n(30),v=n(31),y=n(32);e.exports=function(e){function t(e,t,n){function c(e){var t=j.get(e);s(t,function(t){t(e)})}function u(e,t,n){j.add(t,n),e&&n(t)}if(n||(n=t,t=e,e={}),!t)throw new Error("At least one element required.");if(!n)throw new Error("Listener required.");if(i(t))t=[t];else{if(!r(t))return E.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");t=o(t)}var l=0,d=a(e,"callOnAdd",O.callOnAdd),f=a(e,"onReady",function(){}),h=a(e,"debug",O.debug);s(t,function(e){m.getState(e)||(m.initState(e),g.set(e));var r=g.get(e);return h&&E.log("Attaching listener to element",r,e),S.isDetectable(e)?(h&&E.log(r,"Already detecable, adding listener."),u(d,e,n),void l++):(h&&E.log(r,"Not detectable."),S.isBusy(e)?(h&&E.log(r,"System busy making it detectable"),u(d,e,n),k[r]=k[r]||[],void k[r].push(function(){l++,l===t.length&&f()})):(h&&E.log(r,"Making detectable..."),S.markBusy(e,!0),_.makeDetectable({debug:h},e,function(e){if(h&&E.log(r,"onElementDetectable"),m.getState(e)){S.markAsDetectable(e),S.markBusy(e,!1),_.addListener(e,c),u(d,e,n);var o=m.getState(e);if(o&&o.startSize){var i=e.offsetWidth,a=e.offsetHeight;o.startSize.width===i&&o.startSize.height===a||c(e)}k[r]&&s(k[r],function(e){e()})}else h&&E.log(r,"Element uninstalled before being detectable.");delete k[r],l++,l===t.length&&f()})))}),l===t.length&&f()}function n(e){if(!e)return E.error("At least one element is required.");if(i(e))e=[e];else{if(!r(e))return E.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");e=o(e)}s(e,function(e){j.removeAllListeners(e),_.uninstall(e),m.cleanState(e)})}e=e||{};var g;if(e.idHandler)g={get:function(t){return e.idHandler.get(t,!0)},set:e.idHandler.set};else{var b=l(),w=d({idGenerator:b,stateHandler:m});g=w}var E=e.reporter;if(!E){var x=E===!1;E=f(x)}var A=a(e,"batchProcessor",p({reporter:E})),O={};O.callOnAdd=!!a(e,"callOnAdd",!0),O.debug=!!a(e,"debug",!1);var _,j=u(g),S=c({stateHandler:m}),C=a(e,"strategy","object"),I={reporter:E,batchProcessor:A,stateHandler:m,idHandler:g};if("scroll"===C&&(h.isLegacyOpera()?(E.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),C="object"):h.isIE(9)&&(E.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),C="object")),"scroll"===C)_=y(I);else{if("object"!==C)throw new Error("Invalid strategy name: "+C);_=v(I)}var k={};return{listenTo:t,removeListener:j.removeListener,removeAllListeners:j.removeAllListeners,uninstall:n}}},function(e,t){"use strict";var n=e.exports={};n.forEach=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n]);if(r)return r}}},function(e,t){"use strict";e.exports=function(e){function t(e){var t=i(e);return t&&!!t.isDetectable}function n(e){i(e).isDetectable=!0}function r(e){return!!i(e).busy}function o(e,t){i(e).busy=!!t}var i=e.stateHandler.getState;return{isDetectable:t,markAsDetectable:n,isBusy:r,markBusy:o}}},function(e,t){"use strict";e.exports=function(e){function t(t){var n=e.get(t);return void 0===n?[]:i[n]||[]}function n(t,n){var r=e.get(t);i[r]||(i[r]=[]),i[r].push(n)}function r(e,n){for(var r=t(e),o=0,i=r.length;o<i;++o)if(r[o]===n){r.splice(o,1);break}}function o(e){var n=t(e);n&&(n.length=0)}var i={};return{get:t,add:n,removeListener:r,removeAllListeners:o}}},function(e,t){"use strict";e.exports=function(){function e(){return t++}var t=1;return{generate:e}}},function(e,t){"use strict";e.exports=function(e){function t(e){var t=o(e);return t&&void 0!==t.id?t.id:null}function n(e){var t=o(e);if(!t)throw new Error("setId required the element to have a resize detection state.");var n=r.generate();return t.id=n,n}var r=e.idGenerator,o=e.stateHandler.getState;return{get:t,set:n}}},function(e,t){"use strict";e.exports=function(e){function t(){}var n={log:t,warn:t,error:t};if(!e&&window.console){var r=function(e,t){e[t]=function(){var e=console[t];if(e.apply)e.apply(console,arguments);else for(var n=0;n<arguments.length;n++)e(arguments[n])}};r(n,"log"),r(n,"warn"),r(n,"error")}return n}},function(e,t){"use strict";var n=e.exports={};n.isIE=function(e){function t(){var e=navigator.userAgent.toLowerCase();return e.indexOf("msie")!==-1||e.indexOf("trident")!==-1||e.indexOf(" edge/")!==-1}if(!t())return!1;if(!e)return!0;var n=function(){var e,t=3,n=document.createElement("div"),r=n.getElementsByTagName("i");do n.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->";while(r[0]);return t>4?t:e}();return e===n},n.isLegacyOpera=function(){return!!window.opera}},function(e,t,n){"use strict";function r(){function e(e,t){t||(t=e,e=0),e>i?i=e:e<a&&(a=e),r[e]||(r[e]=[]),r[e].push(t),o++}function t(){for(var e=a;e<=i;e++)for(var t=r[e],n=0;n<t.length;n++){var o=t[n];o()}}function n(){return o}var r={},o=0,i=0,a=0;return{add:e,process:t,size:n}}var o=n(29);e.exports=function(e){function t(e,t){!p&&d&&l&&0===h.size()&&a(),h.add(e,t)}function n(){for(p=!0;h.size();){var e=h;h=r(),e.process()}p=!1}function i(e){p||(void 0===e&&(e=l),f&&(s(f),f=null),e?a():n())}function a(){f=c(n)}function s(e){var t=clearTimeout;return t(e)}function c(e){var t=function(e){return setTimeout(e,0)};return t(e)}e=e||{};var u=e.reporter,l=o.getOption(e,"async",!0),d=o.getOption(e,"auto",!0);d&&!l&&(u&&u.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),l=!0);var f,h=r(),p=!1;return{add:t,force:i}}},function(e,t){"use strict";function n(e,t,n){var r=e[t];return void 0!==r&&null!==r||void 0===n?r:n}var r=e.exports={};r.getOption=n},function(e,t){"use strict";function n(e){return e[i]={},r(e)}function r(e){return e[i]}function o(e){delete e[i]}var i="_erd";e.exports={initState:n,getState:r,cleanState:o}},function(e,t,n){"use strict";var r=n(27);e.exports=function(e){function t(e,t){function n(){t(e)}if(!o(e))throw new Error("Element is not detectable by this strategy.");if(r.isIE(8))c(e).object={proxy:n},e.attachEvent("onresize",n);else{var i=o(e);i.contentDocument.defaultView.addEventListener("resize",n)}}function n(e,t,n){function o(e,t){function n(){function n(){if("static"===u.position){e.style.position="relative";var t=function(e,t,n,r){function o(e){return e.replace(/[^-\d\.]/g,"")}var i=n[r];"auto"!==i&&"0"!==o(i)&&(e.warn("An element that is positioned static has style."+r+"="+i+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+r+" will be set to 0. Element: ",t),t.style[r]=0)};t(a,e,u,"top"),t(a,e,u,"right"),t(a,e,u,"bottom"),t(a,e,u,"left")}}function s(){function r(e,t){return e.contentDocument?void t(e.contentDocument):void setTimeout(function(){r(e,t)},100)}i||n();var o=this;r(o,function(n){t(e)})}""!==u.position&&(n(u),i=!0);var l=document.createElement("object");l.style.cssText=o,l.type="text/html",l.onload=s,r.isIE()||(l.data="about:blank"),e.appendChild(l),c(e).object=l,r.isIE()&&(l.data="about:blank")}var o="display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; padding: 0; margin: 0; opacity: 0; z-index: -1000; pointer-events: none;",i=!1,u=window.getComputedStyle(e),l=e.offsetWidth,d=e.offsetHeight;c(e).startSize={width:l,height:d},s?s.add(n):n()}n||(n=t,t=e,e=null),e=e||{};e.debug;r.isIE(8)?n(t):o(t,n)}function o(e){return c(e).object}function i(e){r.isIE(8)?e.detachEvent("onresize",c(e).object.proxy):e.removeChild(o(e)),delete c(e).object}e=e||{};var a=e.reporter,s=e.batchProcessor,c=e.stateHandler.getState;if(!a)throw new Error("Missing required dependency: reporter.");return{makeDetectable:n,addListener:t,uninstall:i}}},function(e,t,n){"use strict";var r=n(21).forEach;e.exports=function(e){function t(){var e=500,t=500,n=document.createElement("div");n.style.cssText="position: absolute; width: "+2*e+"px; height: "+2*t+"px; visibility: hidden; margin: 0; padding: 0;";var r=document.createElement("div");r.style.cssText="position: absolute; width: "+e+"px; height: "+t+"px; overflow: scroll; visibility: none; top: "+3*-e+"px; left: "+3*-t+"px; visibility: hidden; margin: 0; padding: 0;",r.appendChild(n),document.body.insertBefore(r,document.body.firstChild);var o=e-r.clientWidth,i=t-r.clientHeight;return document.body.removeChild(r),{width:o,height:i}}function n(e,t){function n(t,n){n=n||function(e){
document.head.appendChild(e)};var r=document.createElement("style");return r.innerHTML=t,r.id=e,n(r),r}if(!document.getElementById(e)){var r=t+"_animation",o=t+"_animation_active",i="/* Created by the element-resize-detector library. */\n";i+="."+t+" > div::-webkit-scrollbar { display: none; }\n\n",i+="."+o+" { -webkit-animation-duration: 0.1s; animation-duration: 0.1s; -webkit-animation-name: "+r+"; animation-name: "+r+"; }\n",i+="@-webkit-keyframes "+r+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n",i+="@keyframes "+r+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",n(i)}}function o(e){e.className+=" "+g+"_animation_active"}function i(e,t,n){if(e.addEventListener)e.addEventListener(t,n);else{if(!e.attachEvent)return f.error("[scroll] Don't know how to add event listeners.");e.attachEvent("on"+t,n)}}function a(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n);else{if(!e.detachEvent)return f.error("[scroll] Don't know how to remove event listeners.");e.detachEvent("on"+t,n)}}function s(e){return p(e).container.childNodes[0].childNodes[0].childNodes[0]}function c(e){return p(e).container.childNodes[0].childNodes[0].childNodes[1]}function u(e,t){var n=p(e).listeners;if(!n.push)throw new Error("Cannot add listener to an element that is not detectable.");p(e).listeners.push(t)}function l(e,t,n){function a(){if(e.debug){var n=Array.prototype.slice.call(arguments);if(n.unshift(m.get(t),"Scroll: "),f.log.apply)f.log.apply(null,n);else for(var r=0;r<n.length;r++)f.log(n[r])}}function u(e){function t(e){return e===e.ownerDocument.body||e.ownerDocument.body.contains(e)}return!t(e)}function l(e){var t=p(e).container.childNodes[0];return getComputedStyle(t).width.indexOf("px")===-1}function d(){var e=getComputedStyle(t),n={};return n.position=e.position,n.width=t.offsetWidth,n.height=t.offsetHeight,n.top=e.top,n.right=e.right,n.bottom=e.bottom,n.left=e.left,n.widthCSS=e.width,n.heightCSS=e.height,n}function y(){var e=d();p(t).startSize={width:e.width,height:e.height},a("Element start size",p(t).startSize)}function b(){p(t).listeners=[]}function w(){if(a("storeStyle invoked."),!p(t))return void a("Aborting because element has been uninstalled");var e=d();p(t).style=e}function E(e,t,n){p(e).lastWidth=t,p(e).lastHeight=n}function x(e){return s(e).childNodes[0]}function A(){return 2*v.width+1}function O(){return 2*v.height+1}function _(e){return e+10+A()}function j(e){return e+10+O()}function S(e){return 2*e+A()}function C(e){return 2*e+O()}function I(e,t,n){var r=s(e),o=c(e),i=_(t),a=j(n),u=S(t),l=C(n);r.scrollLeft=i,r.scrollTop=a,o.scrollLeft=u,o.scrollTop=l}function k(){var e=p(t).container;if(!e){e=document.createElement("div"),e.className=g,e.style.cssText="visibility: hidden; display: inline; width: 0px; height: 0px; z-index: -1; overflow: hidden; margin: 0; padding: 0;",p(t).container=e,o(e),t.appendChild(e);var n=function(){p(t).onRendered&&p(t).onRendered()};i(e,"animationstart",n),p(t).onAnimationStart=n}return e}function P(){function e(){var e=p(t).style;if("static"===e.position){t.style.position="relative";var n=function(e,t,n,r){function o(e){return e.replace(/[^-\d\.]/g,"")}var i=n[r];"auto"!==i&&"0"!==o(i)&&(e.warn("An element that is positioned static has style."+r+"="+i+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+r+" will be set to 0. Element: ",t),t.style[r]=0)};n(f,t,e,"top"),n(f,t,e,"right"),n(f,t,e,"bottom"),n(f,t,e,"left")}}function n(e,t,n,r){return e=e?e+"px":"0",t=t?t+"px":"0",n=n?n+"px":"0",r=r?r+"px":"0","left: "+e+"; top: "+t+"; right: "+r+"; bottom: "+n+";"}function r(){p(t).onExpand&&p(t).onExpand()}function o(){p(t).onShrink&&p(t).onShrink()}if(a("Injecting elements"),!p(t))return void a("Aborting because element has been uninstalled");e();var s=p(t).container;s||(s=k());var c=v.width,u=v.height,l="position: absolute; overflow: hidden; z-index: -1; visibility: hidden; width: 100%; height: 100%; left: 0px; top: 0px;",d="position: absolute; overflow: hidden; z-index: -1; visibility: hidden; "+n(-(1+c),-(1+u),-u,-c),h="position: absolute; overflow: scroll; z-index: -1; visibility: hidden; width: 100%; height: 100%;",m="position: absolute; overflow: scroll; z-index: -1; visibility: hidden; width: 100%; height: 100%;",y="position: absolute; left: 0; top: 0;",b="position: absolute; width: 200%; height: 200%;",w=document.createElement("div"),E=document.createElement("div"),x=document.createElement("div"),A=document.createElement("div"),O=document.createElement("div"),_=document.createElement("div");w.dir="ltr",w.style.cssText=l,w.className=g,E.className=g,E.style.cssText=d,x.style.cssText=h,A.style.cssText=y,O.style.cssText=m,_.style.cssText=b,x.appendChild(A),O.appendChild(_),E.appendChild(x),E.appendChild(O),w.appendChild(E),s.appendChild(w),i(x,"scroll",r),i(O,"scroll",o),p(t).onExpandScroll=r,p(t).onShrinkScroll=o}function T(){function n(e,t,n){var r=x(e),o=_(t),i=j(n);r.style.width=o+"px",r.style.height=i+"px"}function o(r){var o=t.offsetWidth,i=t.offsetHeight;a("Storing current size",o,i),E(t,o,i),h.add(0,function(){if(!p(t))return void a("Aborting because element has been uninstalled");if(e.debug){var r=t.offsetWidth,s=t.offsetHeight;r===o&&s===i||f.warn(m.get(t),"Scroll: Size changed before updating detector elements.")}n(t,o,i)}),h.add(1,function(){return p(t)?void I(t,o,i):void a("Aborting because element has been uninstalled")}),r&&h.add(2,function(){return p(t)?void r():void a("Aborting because element has been uninstalled")})}function i(){function e(){return void 0===p(t).lastNotifiedWidth}a("notifyListenersIfNeeded invoked");var n=p(t);return e()&&n.lastWidth===n.startSize.width&&n.lastHeight===n.startSize.height?a("Not notifying: Size is the same as the start size, and there has been no notification yet."):n.lastWidth===n.lastNotifiedWidth&&n.lastHeight===n.lastNotifiedHeight?a("Not notifying: Size already notified"):(a("Current size not notified, notifying..."),n.lastNotifiedWidth=n.lastWidth,n.lastNotifiedHeight=n.lastHeight,void r(p(t).listeners,function(e){e(t)}))}function u(){if(a("startanimation triggered."),l(t))return void a("Ignoring since element is still unrendered...");a("Element rendered.");var e=s(t),n=c(t);0!==e.scrollLeft&&0!==e.scrollTop&&0!==n.scrollLeft&&0!==n.scrollTop||(a("Scrollbars out of sync. Updating detector elements..."),o(i))}function d(){if(a("Scroll detected."),l(t))return void a("Scroll event fired while unrendered. Ignoring...");var e=t.offsetWidth,n=t.offsetHeight;e!==t.lastWidth||n!==t.lastHeight?(a("Element size changed."),o(i)):a("Element size has not changed ("+e+"x"+n+").")}if(a("registerListenersAndPositionElements invoked."),!p(t))return void a("Aborting because element has been uninstalled");p(t).onRendered=u,p(t).onExpand=d,p(t).onShrink=d;var v=p(t).style;n(t,v.width,v.height)}function R(){if(a("finalizeDomMutation invoked."),!p(t))return void a("Aborting because element has been uninstalled");var e=p(t).style;E(t,e.width,e.height),I(t,e.width,e.height)}function U(){n(t)}function M(){a("Installing..."),b(),y(),h.add(0,w),h.add(1,P),h.add(2,T),h.add(3,R),h.add(4,U)}n||(n=t,t=e,e=null),e=e||{},a("Making detectable..."),u(t)?(a("Element is detached"),k(),a("Waiting until element is attached..."),p(t).onRendered=function(){a("Element is now attached"),M()}):M()}function d(e){var t=p(e);t&&(t.onExpandScroll&&a(s(e),"scroll",t.onExpandScroll),t.onShrinkScroll&&a(c(e),"scroll",t.onShrinkScroll),t.onAnimationStart&&a(t.container,"animationstart",t.onAnimationStart),t.container&&e.removeChild(t.container))}e=e||{};var f=e.reporter,h=e.batchProcessor,p=e.stateHandler.getState,m=(e.stateHandler.hasState,e.idHandler);if(!h)throw new Error("Missing required dependency: batchProcessor");if(!f)throw new Error("Missing required dependency: reporter.");var v=t(),y="erd_scroll_detection_scrollbar_style",g="erd_scroll_detection_container";return n(y,g),{makeDetectable:l,addListener:u,uninstall:d}}},function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r),e}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}}function s(){var e;try{e=t.storage.debug}catch(n){}return e}function c(){try{return window.localStorage}catch(e){}}t=e.exports=n(34),t.log=i,t.formatArgs=o,t.save=a,t.load=s,t.useColors=r,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(s())},function(e,t,n){function r(){return t.colors[l++%t.colors.length]}function o(e){function n(){}function o(){var e=o,n=+new Date,i=n-(u||n);e.diff=i,e.prev=u,e.curr=n,u=n,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=r());var a=Array.prototype.slice.call(arguments);a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var s=0;a[0]=a[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;s++;var o=t.formatters[r];if("function"==typeof o){var i=a[s];n=o.call(e,i),a.splice(s,1),s--}return n}),"function"==typeof t.formatArgs&&(a=t.formatArgs.apply(e,a));var c=o.log||t.log||console.log.bind(console);c.apply(e,a)}n.enabled=!1,o.enabled=!0;var i=t.enabled(e)?o:n;return i.namespace=e,i}function i(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(e=n[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function a(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=o,t.coerce=c,t.disable=a,t.enable=i,t.enabled=s,t.humanize=n(35),t.names=[],t.skips=[],t.formatters={};var u,l=0},function(e,t){function n(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"days":case"day":case"d":return n*u;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function r(e){return e>=u?Math.round(e/u)+"d":e>=c?Math.round(e/c)+"h":e>=s?Math.round(e/s)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function o(e){return i(e,u,"day")||i(e,c,"hour")||i(e,s,"minute")||i(e,a,"second")||e+" ms"}function i(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var a=1e3,s=60*a,c=60*s,u=24*c,l=365.25*u;e.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t["long"]?o(e):r(e)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PopupWidget=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function p(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},u=n(17),l=n(18),d=n(33),f=r(d),h=(0,f["default"])("squatch-js:POPUPwidget");t.PopupWidget=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"squatchpop";o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=r;if(a.triggerElement=document.getElementById(n),!a.triggerElement)throw new Error("elementId '"+n+"' not found.");return a.popupdiv=document.createElement("div"),a.popupdiv.id="squatchModal",a.popupdiv.style="display: none; position: fixed; z-index: 1; padding-top: 5%; left: 0; top: -2000px; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);",a.popupcontent=document.createElement("div"),a.popupcontent.style="margin: auto; width: 80%; max-width: 500px; position: relative;",a.triggerElement.onclick=function(){a.open()},a.popupdiv.onclick=function(e){a._clickedOutside(e)},a.eventBus.addEventListener("open_popup",function(e){a.open()}),a.eventBus.addEventListener("close_popup",function(e){a.close()}),r}return a(t,e),s(t,[{key:"load",value:function(){var e=this;e.popupdiv.appendChild(e.popupcontent),document.body.appendChild(e.popupdiv),e.popupcontent.appendChild(e.frame);var t=e.frame.contentWindow.document;t.open(),t.write(e.content),t.close(),h("Popup template loaded into iframe")}},{key:"reload",value:function(e,n){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reload",this).call(this,e,n);var r=this;r.widgetApi.cookieUser({user:{email:e},engagementMedium:"POPUP",widgetType:r.type,jwt:n}).then(function(e){e.template&&!function(){r.content=e.template;var t=r.frame.contentWindow.document;t.open(),t.write(r.content),t.close(),(0,l.domready)(t,function(){var e=t.getElementById("cta");e&&e.parentNode.removeChild(e),r.erd.listenTo(t.getElementsByClassName("squatch-container"),function(e){var t=e.offsetHeight;t>0&&(r.frame.height=t),window.innerHeight>r.frame.height?r.popupdiv.style.paddingTop=(window.innerHeight-r.frame.height)/2+"px":r.popupdiv.style.paddingTop="5px",e.style.width="100%",e.style.height="100%"}),h("Popup reloaded")})}()})["catch"](function(e){h("Failed to reload"+e)})}},{key:"open",value:function(){var e=this,t=e.popupdiv,n=e.frame,r=n.contentWindow,o=r.document,i=this.erd;this.analyticsApi;(0,l.domready)(o,function(){var a=r.squatch,s=o.getElementById("cta");s&&s.parentNode.removeChild(s),o.body.style.overflowY="hidden",t.style.display="table",t.style.top="0",n.height=o.body.scrollHeight,i.listenTo(o.getElementsByClassName("squatch-container"),function(e){var r=e.scrollHeight;r>0&&(n.height=r),window.innerHeight>n.height?t.style.paddingTop=(window.innerHeight-n.height)/2+"px":t.style.paddingTop="5px",e.style.width="100%",e.style.height="100%"}),e._loadEvent(a),h("Popup opened")})}},{key:"close",value:function(){var e=this.popupdiv,t=this.frame.contentWindow.document,n=this.erd;e.style.display="none",n.uninstall(t.body),h("Popup closed")}},{key:"_clickedOutside",value:function(e){this.popupdiv;e.target==this.popupdiv&&this.close()}},{key:"_error",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"modal",r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"","body { margin: 0; } .modal { box-shadow: none; border: 0; }");return c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_error",this).call(this,e,n,r)}}]),t}(u.Widget)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CtaWidget=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function p(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},u=n(36),l=n(18),d=n(33),f=r(d),h=(0,f["default"])("squatch-js:CTAwidget");t.CtaWidget=function(e){function t(e,n){o(this,t);var r=document.createElement("div");r.id="cta",document.body.appendChild(r);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"cta")),s=a;return n.side||n.position||(n.position="bottom",n.side="right"),"middle"===n.position?(s.position="top: 45%;",s.side="center"===n.side?"right: 45%;":n.side+": -10px;"):(s.position=n.position+": -10px;",s.side="center"===n.side?"right: 45%;":n.side+": 20px;"),s.positionClass=n.position,s.ctaFrame=document.createElement("iframe"),s.ctaFrame.style="border: 0; background-color: transparent; position:absolute; display: none;"+s.side+s.position,s.eventBus.addEventListener("cta_btn_clicked",function(e){h("cta btn clicked"),s.open()}),document.body.appendChild(a.ctaFrame),a}return a(t,e),s(t,[{key:"load",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this);var e=this.frame.contentWindow.document,n=this.ctaFrame,r=this.ctaFrame.contentWindow.document,o=" "+this.positionClass,i=this.erd;(0,l.domready)(e,function(){var t=e.getElementById("cta");t?(t.parentNode.removeChild(t),r.open(),r.write(t.innerHTML),r.close(),(0,l.domready)(r,function(){n.height=r.body.offsetHeight,n.width=r.body.scrollWidth,n.style.display="block";var e=r.getElementsByClassName("cta-container")[0];e.className+=o,i.listenTo(e,function(e){var t=e.offsetHeight,r=e.offsetWidth;n.height=t,n.width=r}),h("CTA template loaded into iframe")})):h(new Error("CTA element not found in theme"))})}},{key:"reload",value:function(e,n){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reload",this).call(this,e,n)}}]),t}(u.PopupWidget)},function(e,t,n){"use strict";function r(){var e=window.squatch||null,t=window._squatch||null;if(e&&t){var n=t.ready;(0,o.each)(n,function(e,t){return setTimeout(function(){e()},0)}),window._squatch=void 0;try{delete window._squatch}catch(r){}}}Object.defineProperty(t,"__esModule",{value:!0}),t.asyncLoad=r;var o=n(39)},function(e,t){"use strict";function n(e,t,n){var r;if(!e)return 0;if(n=n?n:e,e instanceof Array){for(r=0;r<e.length;r++)if(t.call(n,e[r],r,e)===!1)return 0}else for(r in e)if(e.hasOwnProperty(r)&&t.call(n,e[r],r,e)===!1)return 0;return 1}Object.defineProperty(t,"__esModule",{value:!0}),t.each=n},function(e,t,n){var r,o,i;(function(n){"use strict";!function(n,a){o=[],r=a,i="function"==typeof r?r.apply(t,o):r,!(void 0!==i&&(e.exports=i))}(this,function(){function e(){try{return a in o&&o[a]}catch(e){return!1}}var t,r={},o="undefined"!=typeof window?window:n,i=o.document,a="localStorage",s="script";if(r.disabled=!1,r.version="1.3.20",r.set=function(e,t){},r.get=function(e,t){},r.has=function(e){return void 0!==r.get(e)},r.remove=function(e){},r.clear=function(){},r.transact=function(e,t,n){null==n&&(n=t,t=null),null==t&&(t={});var o=r.get(e,t);n(o),r.set(e,o)},r.getAll=function(){},r.forEach=function(){},r.serialize=function(e){return JSON.stringify(e)},r.deserialize=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}},e())t=o[a],r.set=function(e,n){return void 0===n?r.remove(e):(t.setItem(e,r.serialize(n)),n)},r.get=function(e,n){var o=r.deserialize(t.getItem(e));return void 0===o?n:o},r.remove=function(e){t.removeItem(e)},r.clear=function(){t.clear()},r.getAll=function(){var e={};return r.forEach(function(t,n){e[t]=n}),e},r.forEach=function(e){for(var n=0;n<t.length;n++){var o=t.key(n);e(o,r.get(o))}};else if(i&&i.documentElement.addBehavior){var c,u;try{u=new ActiveXObject("htmlfile"),u.open(),u.write("<"+s+">document.w=window</"+s+'><iframe src="/favicon.ico"></iframe>'),u.close(),c=u.w.frames[0].document,t=c.createElement("div")}catch(l){t=i.createElement("div"),c=i.body}var d=function(e){return function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(t),c.appendChild(t),t.addBehavior("#default#userData"),t.load(a);var o=e.apply(r,n);return c.removeChild(t),o}},f=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),h=function(e){return e.replace(/^d/,"___$&").replace(f,"___")};r.set=d(function(e,t,n){return t=h(t),void 0===n?r.remove(t):(e.setAttribute(t,r.serialize(n)),e.save(a),n)}),r.get=d(function(e,t,n){t=h(t);var o=r.deserialize(e.getAttribute(t));return void 0===o?n:o}),r.remove=d(function(e,t){t=h(t),e.removeAttribute(t),e.save(a)}),r.clear=d(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(a);for(var n=t.length-1;n>=0;n--)e.removeAttribute(t[n].name);e.save(a)}),r.getAll=function(e){var t={};return r.forEach(function(e,n){t[e]=n}),t},r.forEach=d(function(e,t){for(var n,o=e.XMLDocument.documentElement.attributes,i=0;n=o[i];++i)t(n.name,r.deserialize(e.getAttribute(n.name)))})}try{var p="__storejs__";r.set(p,p),r.get(p)!=p&&(r.disabled=!0),r.remove(p)}catch(l){r.disabled=!0}return r.enabled=!r.disabled,r})}).call(t,function(){return this}())},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){var e={};e=function(){this.listeners={}},e.prototype={addEventListener:function(e,t,n){for(var r=[],o=arguments.length,i=0;i<o;i++)r.push(arguments[i]);r=r.length>3?r.splice(3,r.length-1):[],"undefined"!=typeof this.listeners[e]?this.listeners[e].push({scope:n,callback:t,args:r}):this.listeners[e]=[{scope:n,callback:t,args:r}]},removeEventListener:function(e,t,n){if("undefined"!=typeof this.listeners[e]){for(var r=this.listeners[e].length,o=[],i=0;i<r;i++){var a=this.listeners[e][i];a.scope==n&&a.callback==t||o.push(a)}this.listeners[e]=o}},hasEventListener:function(e,t,n){if("undefined"!=typeof this.listeners[e]){var r=this.listeners[e].length;if(void 0===t&&void 0===n)return r>0;for(var o=0;o<r;o++){var i=this.listeners[e][o];if((!n||i.scope==n)&&i.callback==t)return!0}}return!1},dispatch:function(e,t){for(var n=0,r={type:e,target:t},o=[],i=arguments.length,a=0;a<i;a++)o.push(arguments[a]);if(o=o.length>2?o.splice(2,o.length-1):[],o=[r].concat(o),"undefined"!=typeof this.listeners[e])for(var s=this.listeners[e].length,a=0;a<s;a++){var c=this.listeners[e][a];if(c&&c.callback){var u=o.concat(c.args);c.callback.apply(c.scope,u),n+=1}}},getEvents:function(){var e="";for(var t in this.listeners)for(var n=this.listeners[t].length,r=0;r<n;r++){var o=this.listeners[t][r];e+=o.scope&&o.scope.className?o.scope.className:"anonymous",e+=" listen for '"+t+"'\n"}return e}};var t=new e;return t})}])});