!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.squatch=t():e.squatch=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){r(3),e.exports=r(12)},,,function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function r(e){return"string"!=typeof e&&(e=String(e)),e}function n(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return m.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function s(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function a(e){var t=new FileReader;return t.readAsArrayBuffer(e),s(t)}function u(e){var t=new FileReader;return t.readAsText(e),s(t)}function c(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(m.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(m.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob?(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(a)},this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=i(this);return e?e:Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(l)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(e){var t=e.toUpperCase();return y.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var r=t.body;if(f.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,r||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=h(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function l(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function p(e){var t=new o,r=(e.getAllResponseHeaders()||"").trim().split("\n");return r.forEach(function(e){var r=e.trim().split(":"),n=r.shift().trim(),o=r.join(":").trim();t.append(n,o)}),t}function d(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof o?t.headers:new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var m={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};o.prototype.append=function(e,n){e=t(e),n=r(n);var o=this.map[e];o||(o=[],this.map[e]=o),o.push(n)},o.prototype["delete"]=function(e){delete this.map[t(e)]},o.prototype.get=function(e){var r=this.map[t(e)];return r?r[0]:null},o.prototype.getAll=function(e){return this.map[t(e)]||[]},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,n){this.map[t(e)]=[r(n)]},o.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){e.call(t,n,r,this)},this)},this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),n(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),n(e)},m.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},c.call(f.prototype),c.call(d.prototype),d.prototype.clone=function(){return new d(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},d.error=function(){var e=new d(null,{status:0,statusText:""});return e.type="error",e};var v=[301,302,303,307,308];d.redirect=function(e,t){if(v.indexOf(t)===-1)throw new RangeError("Invalid status code");return new d(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=f,e.Response=d,e.fetch=function(e,t){return new Promise(function(r,n){function o(){return"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0}var i;i=f.prototype.isPrototypeOf(e)&&!t?e:new f(e,t);var s=new XMLHttpRequest;s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:p(s),url:o()},t="response"in s?s.response:s.responseText;r(new d(t,e))},s.onerror=function(){n(new TypeError("Network request failed"))},s.ontimeout=function(){n(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials&&(s.withCredentials=!0),"responseType"in s&&m.blob&&(s.responseType="blob"),i.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},,,,,,function(e,t,r){(function(t,n){!function(t,r){e.exports=r()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function o(e){return"function"==typeof e}function i(e){X=e}function s(e){K=e}function a(){return function(){return t.nextTick(l)}}function u(){return function(){G(l)}}function c(){var e=0,t=new Q(l),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function h(){var e=new MessageChannel;return e.port1.onmessage=l,function(){return e.port2.postMessage(0)}}function f(){var e=setTimeout;return function(){return e(l,1)}}function l(){for(var e=0;e<V;e+=2){var t=re[e],r=re[e+1];t(r),re[e]=void 0,re[e+1]=void 0}V=0}function p(){try{var e=r(11);return G=e.runOnLoop||e.runOnContext,u()}catch(t){return f()}}function d(e,t){var r=arguments,n=this,o=new this.constructor(y);void 0===o[oe]&&k(o);var i=n._state;return i?!function(){var e=r[i-1];K(function(){return R(i,o,e,n._result)})}():P(n,o,e,t),o}function m(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(y);return S(r,e),r}function y(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function b(e){try{return e.then}catch(t){return ue.error=t,ue}}function w(e,t,r,n){try{e.call(t,r,n)}catch(o){return o}}function A(e,t,r){K(function(e){var n=!1,o=w(r,t,function(r){n||(n=!0,t!==r?S(e,r):O(e,r))},function(t){n||(n=!0,_(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&o&&(n=!0,_(e,o))},e)}function x(e,t){t._state===se?O(e,t._result):t._state===ae?_(e,t._result):P(t,void 0,function(t){return S(e,t)},function(t){return _(e,t)})}function E(e,t,r){t.constructor===e.constructor&&r===d&&t.constructor.resolve===m?x(e,t):r===ue?_(e,ue.error):void 0===r?O(e,t):o(r)?A(e,t,r):O(e,t)}function S(t,r){t===r?_(t,v()):e(r)?E(t,r,b(r)):O(t,r)}function j(e){e._onerror&&e._onerror(e._result),T(e)}function O(e,t){e._state===ie&&(e._result=t,e._state=se,0!==e._subscribers.length&&K(T,e))}function _(e,t){e._state===ie&&(e._state=ae,e._result=t,K(j,e))}function P(e,t,r,n){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+se]=r,o[i+ae]=n,0===i&&e._state&&K(T,e)}function T(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,o=void 0,i=e._result,s=0;s<t.length;s+=3)n=t[s],o=t[s+r],n?R(r,n,o,i):o(i);e._subscribers.length=0}}function I(){this.error=null}function C(e,t){try{return e(t)}catch(r){return ce.error=r,ce}}function R(e,t,r,n){var i=o(r),s=void 0,a=void 0,u=void 0,c=void 0;if(i){if(s=C(r,n),s===ce?(c=!0,a=s.error,s=null):u=!0,t===s)return void _(t,g())}else s=n,u=!0;t._state!==ie||(i&&u?S(t,s):c?_(t,a):e===se?O(t,s):e===ae&&_(t,s))}function U(e,t){try{t(function(t){S(e,t)},function(t){_(e,t)})}catch(r){_(e,r)}}function q(){return he++}function k(e){e[oe]=he++,e._state=void 0,e._result=void 0,e._subscribers=[]}function F(e,t){this._instanceConstructor=e,this.promise=new e(y),this.promise[oe]||k(this.promise),H(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&O(this.promise,this._result))):_(this.promise,M())}function M(){return new Error("Array Methods must be provided an Array")}function $(e){return new F(this,e).promise}function B(e){var t=this;return new t(H(e)?function(r,n){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(r,n)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function z(e){var t=this,r=new t(y);return _(r,e),r}function L(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function N(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function Z(e){this[oe]=q(),this._result=this._state=void 0,this._subscribers=[],y!==e&&("function"!=typeof e&&L(),this instanceof Z?U(this,e):N())}function D(){var e=void 0;if("undefined"!=typeof n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var r=e.Promise;if(r){var o=null;try{o=Object.prototype.toString.call(r.resolve())}catch(t){}if("[object Promise]"===o&&!r.cast)return}e.Promise=Z}var J=void 0;J=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var H=J,V=0,G=void 0,X=void 0,K=function(e,t){re[V]=e,re[V+1]=t,V+=2,2===V&&(X?X(l):ne())},Y="undefined"!=typeof window?window:void 0,W=Y||{},Q=W.MutationObserver||W.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof t&&"[object process]"==={}.toString.call(t),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,re=new Array(1e3),ne=void 0;ne=ee?a():Q?c():te?h():void 0===Y?p():f();var oe=Math.random().toString(36).substring(16),ie=void 0,se=1,ae=2,ue=new I,ce=new I,he=0;return F.prototype._enumerate=function(){for(var e=this.length,t=this._input,r=0;this._state===ie&&r<e;r++)this._eachEntry(t[r],r)},F.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===m){var o=b(e);if(o===d&&e._state!==ie)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(r===Z){var i=new r(y);E(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},F.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===ie&&(this._remaining--,e===ae?_(n,r):this._result[t]=r),0===this._remaining&&O(n,this._result)},F.prototype._willSettleAt=function(e,t){var r=this;P(e,void 0,function(e){return r._settledAt(se,t,e)},function(e){return r._settledAt(ae,t,e)})},Z.all=$,Z.race=B,Z.resolve=m,Z.reject=z,Z._setScheduler=i,Z._setAsap=s,Z._asap=K,Z.prototype={constructor:Z,then:d,"catch":function(e){return this.then(null,e)}},D(),Z.polyfill=D,Z.Promise=Z,Z})}).call(t,r(10),function(){return this}())},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(h===setTimeout)return setTimeout(e,0);if((h===r||!h)&&setTimeout)return h=setTimeout,setTimeout(e,0);try{return h(e,0)}catch(t){try{return h.call(null,e,0)}catch(t){return h.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===n||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){m&&p&&(m=!1,p.length?d=p.concat(d):y=-1,d.length&&a())}function a(){if(!m){var e=o(s);m=!0;for(var t=d.length;t;){for(p=d,d=[];++y<t;)p&&p[y].run();y=-1,t=d.length}p=null,m=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var h,f,l=e.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:r}catch(e){h=r}try{f="function"==typeof clearTimeout?clearTimeout:n}catch(e){f=n}}();var p,d=[],m=!1,y=-1;l.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new u(e,t)),1!==d.length||m||o(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=c,l.addListener=c,l.once=c,l.off=c,l.removeListener=c,l.removeAllListeners=c,l.emit=c,l.binding=function(e){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r(3);var s=r(9),a=n(s),u=r(13),c=r(23),h=n(c),f=function(){function e(t){if(o(this,e),!t.tenantAlias)throw new Error("tenantAlias not provided");this.tenantAlias=t.tenantAlias,this.domain=t.domain||"https://staging.referralsaasquatch.com"}return i(e,[{key:"cookieUser",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{widgetType:"",engagementMedium:"",jwt:""};e.validateInput(t,h["default"].cookieUser);var r=encodeURIComponent(this.tenantAlias),n=t.widgetType?"?widgetType="+encodeURIComponent(t.widgetType):"",o=t.engagementMedium?(n?"&":"?")+"engagementMedium="+encodeURIComponent(t.engagementMedium):(n?"&":"?")+"engagementMedium=POPUP",i=n+o,s="/api/v1/"+r+"/widget/user/cookie_user"+i,a=this.domain+s;return e.doPut(a,JSON.stringify(t.user?t.user:{}),t.jwt)}},{key:"upsert",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{widgetType:"",engagementMedium:"",jwt:""};e.validateInput(t,h["default"].upsertUser);var r=encodeURIComponent(this.tenantAlias),n=encodeURIComponent(t.user.accountId),o=encodeURIComponent(t.user.id),i=t.widgetType?"?widgetType="+encodeURIComponent(t.widgetType):"",s=t.engagementMedium?(i?"&":"?")+"engagementMedium="+encodeURIComponent(t.engagementMedium):(i?"&":"?")+"engagementMedium=POPUP",a=i+s,u="/api/v1/"+r+"/widget/account/"+n+"/user/"+o+"/upsert"+a,c=this.domain+u,f=t.user;return delete f.accountId,delete f.id,e.doPut(c,JSON.stringify(f),t.jwt)}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{widgetType:"",engagementMedium:"",jwt:""};e.validateInput(t,h["default"].upsertUser);var r=encodeURIComponent(this.tenantAlias),n=encodeURIComponent(t.user.accountId),o=encodeURIComponent(t.user.id),i=t.widgetType?"?widgetType="+encodeURIComponent(t.widgetType):"",s=t.engagementMedium?(i?"&":"?")+"engagementMedium="+encodeURIComponent(t.engagementMedium):(i?"&":"?")+"engagementMedium=POPUP",a=i+s,u="/api/v1/"+r+"/widget/account/"+n+"/user/"+o+"/render"+a,c=this.domain+u;return e.doRequest(c,t.jwt)}},{key:"squatchReferralCookie",value:function(){var t=encodeURIComponent(this.tenantAlias),r=this.domain+"/a/"+t+"/widgets/squatchcookiejson";return e.doRequest(r)}}],[{key:"validateInput",value:function(e,t){var r=(0,u.validate)(e,t);if(!r.valid)throw r.errors}},{key:"doRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r={Accept:"application/json","Content-Type":"application/json"};return t&&(r["X-SaaSquatch-User-Token"]=t),fetch(e,{method:"GET",headers:r,credentials:"include",mode:"cors"}).then(function(e){var t=e.url.split("/"),r=t[t.length-1];return e.ok&&"squatchcookiejson"===r?e.json():e.text()})}},{key:"doPut",value:function(e,t,r){var n={Accept:"application/json","Content-Type":"application/json","X-SaaSquatch-Referrer":window?window.location.href:""};return r&&(n["X-SaaSquatch-User-Token"]=r),fetch(e,{method:"PUT",headers:n,credentials:"include",mode:"cors",body:t}).then(function(e){var t=e.json();return e.ok?t:t.then(a["default"].reject.bind(a["default"]))})}}]),e}();t["default"]=f},function(e,t,r){"use strict";var n=e.exports.Validator=r(14);e.exports.ValidatorResult=r(22).ValidatorResult,e.exports.ValidationError=r(22).ValidationError,e.exports.SchemaError=r(22).SchemaError,e.exports.validate=function(e,t,r){var o=new n;return o.validate(e,t,r)}},function(e,t,r){"use strict";var n=r(15),o=r(21),i=r(22),s=i.ValidatorResult,a=i.SchemaError,u=i.SchemaContext,c=function f(){this.customFormats=Object.create(f.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(h),this.attributes=Object.create(o.validators)};c.prototype.customFormats={},c.prototype.schemas=null,c.prototype.types=null,c.prototype.attributes=null,c.prototype.unresolvedRefs=null,c.prototype.addSchema=function(e,t){if(!e)return null;var r=t||e.id;return this.addSubSchema(r,e),r&&(this.schemas[r]=e),this.schemas[r]},c.prototype.addSubSchema=function(e,t){if(t&&"object"==typeof t){if(t.$ref){var r=n.resolve(e,t.$ref);return void(void 0===this.schemas[r]&&(this.schemas[r]=null,this.unresolvedRefs.push(r)))}var o=t.id&&n.resolve(e,t.id),s=o||e;if(o){if(this.schemas[o]){if(!i.deepCompareStrict(this.schemas[o],t))throw new Error("Schema <"+t+"> already exists with different definition");return this.schemas[o]}this.schemas[o]=t;var a=o.replace(/^([^#]*)#$/,"$1");this.schemas[a]=t}return this.addSubSchemaArray(s,t.items instanceof Array?t.items:[t.items]),this.addSubSchemaArray(s,t["extends"]instanceof Array?t["extends"]:[t["extends"]]),this.addSubSchema(s,t.additionalItems),this.addSubSchemaObject(s,t.properties),this.addSubSchema(s,t.additionalProperties),this.addSubSchemaObject(s,t.definitions),this.addSubSchemaObject(s,t.patternProperties),this.addSubSchemaObject(s,t.dependencies),this.addSubSchemaArray(s,t.disallow),this.addSubSchemaArray(s,t.allOf),this.addSubSchemaArray(s,t.anyOf),this.addSubSchemaArray(s,t.oneOf),this.addSubSchema(s,t.not),this.schemas[o]}},c.prototype.addSubSchemaArray=function(e,t){if(t instanceof Array)for(var r=0;r<t.length;r++)this.addSubSchema(e,t[r])},c.prototype.addSubSchemaObject=function(e,t){if(t&&"object"==typeof t)for(var r in t)this.addSubSchema(e,t[r])},c.prototype.setSchemas=function(e){this.schemas=e},c.prototype.getSchema=function(e){return this.schemas[e]},c.prototype.validate=function(e,t,r,o){r||(r={});var i=r.propertyName||"instance",s=n.resolve(r.base||"/",t.id||"");if(o||(o=new u(t,r,i,s,Object.create(this.schemas)),o.schemas[s]||(o.schemas[s]=t)),t){var c=this.validateSchema(e,t,r,o);if(!c)throw new Error("Result undefined");return c}throw new a("no schema specified",t)},c.prototype.validateSchema=function(e,t,r,n){function c(e){var t="string"==typeof e?e:e.$ref;return"string"==typeof t&&t}function h(e,t){var r;return(r=c(e))?f.resolve(e,r,t).subschema:e}var f=this,l=new s(e,t,r,n);if(!t)throw new Error("schema is undefined");t["extends"]&&(t["extends"]instanceof Array?t["extends"].forEach(function(e){t=i.deepMerge(t,h(e,n))}):t=i.deepMerge(t,h(t["extends"],n)));var p;if(p=c(t)){var d=this.resolve(t,p,n),m=new u(d.subschema,r,n.propertyPath,d.switchSchema,n.schemas);return this.validateSchema(e,d.subschema,r,m)}var y=r&&r.skipAttributes||[];for(var v in t)if(!o.ignoreProperties[v]&&y.indexOf(v)<0){var g=null,b=f.attributes[v];if(b)g=b.call(f,e,t,r,n);else if(r.allowUnknownAttributes===!1)throw new a("Unsupported attribute: "+v,t);g&&l.importErrors(g)}if("function"==typeof r.rewrite){var w=r.rewrite.call(this,e,t,r,n);l.instance=w}return l},c.prototype.resolve=function(e,t,r){if(t=r.resolve(t),r.schemas[t])return{subschema:r.schemas[t],switchSchema:t};var o=n.parse(t),s=o&&o.hash,u=s&&s.length&&t.substr(0,t.length-s.length);if(!u||!r.schemas[u])throw new a("no such schema <"+t+">",e);var c=i.objectGetPath(r.schemas[u],s.substr(1));if(void 0===c)throw new a("no such schema "+s+" located in <"+u+">",e);return{subschema:c,switchSchema:t}},c.prototype.testType=function(e,t,r,n,o){if("function"==typeof this.types[o])return this.types[o].call(this,e);if(o&&"object"==typeof o){var i=this.validateSchema(e,o,r,n);return void 0===i||!(i&&i.errors.length)}return!0};var h=c.prototype.types={};h.string=function(e){return"string"==typeof e},h.number=function(e){return"number"==typeof e&&isFinite(e)},h.integer=function(e){return"number"==typeof e&&e%1===0},h["boolean"]=function(e){return"boolean"==typeof e},h.array=function(e){return e instanceof Array},h["null"]=function(e){return null===e},h.date=function(e){return e instanceof Date},h.any=function(e){return!0},h.object=function(e){return e&&"object"==typeof e&&!(e instanceof Array)&&!(e instanceof Date)},e.exports=c},function(e,t,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,r){if(e&&c(e)&&e instanceof n)return e;var o=new n;return o.parse(e,t,r),o}function i(e){return u(e)&&(e=o(e)),e instanceof n?e.format():n.prototype.format.call(e)}function s(e,t){return o(e,!1,!0).resolve(t)}function a(e,t){return e?o(e,!1,!0).resolveObject(t):t}function u(e){return"string"==typeof e}function c(e){return"object"==typeof e&&null!==e}function h(e){return null===e}function f(e){return null==e}var l=r(16);t.parse=o,t.resolve=s,t.resolveObject=a,t.format=i,t.Url=n;var p=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,m=["<",">",'"',"`"," ","\r","\n","\t"],y=["{","}","|","\\","^","`"].concat(m),v=["'"].concat(y),g=["%","/","?",";","#"].concat(v),b=["/","?","#"],w=255,A=/^[a-z0-9A-Z_-]{0,63}$/,x=/^([a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},j={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},O=r(18);n.prototype.parse=function(e,t,r){if(!u(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e;n=n.trim();var o=p.exec(n);if(o){o=o[0];var i=o.toLowerCase();this.protocol=i,n=n.substr(o.length)}if(r||o||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===n.substr(0,2);!s||o&&S[o]||(n=n.substr(2),this.slashes=!0)}if(!S[o]&&(s||o&&!j[o])){for(var a=-1,c=0;c<b.length;c++){var h=n.indexOf(b[c]);h!==-1&&(a===-1||h<a)&&(a=h)}var f,d;d=a===-1?n.lastIndexOf("@"):n.lastIndexOf("@",a),d!==-1&&(f=n.slice(0,d),n=n.slice(d+1),this.auth=decodeURIComponent(f)),a=-1;for(var c=0;c<g.length;c++){var h=n.indexOf(g[c]);h!==-1&&(a===-1||h<a)&&(a=h)}a===-1&&(a=n.length),this.host=n.slice(0,a),n=n.slice(a),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var y=this.hostname.split(/\./),c=0,_=y.length;c<_;c++){var P=y[c];if(P&&!P.match(A)){for(var T="",I=0,C=P.length;I<C;I++)T+=P.charCodeAt(I)>127?"x":P[I];if(!T.match(A)){var R=y.slice(0,c),U=y.slice(c+1),q=P.match(x);q&&(R.push(q[1]),U.unshift(q[2])),U.length&&(n="/"+U.join(".")+n),this.hostname=R.join(".");break}}}if(this.hostname.length>w?this.hostname="":this.hostname=this.hostname.toLowerCase(),!m){for(var k=this.hostname.split("."),F=[],c=0;c<k.length;++c){var M=k[c];F.push(M.match(/[^A-Za-z0-9_-]/)?"xn--"+l.encode(M):M)}this.hostname=F.join(".")}var $=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+$,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!E[i])for(var c=0,_=v.length;c<_;c++){var z=v[c],L=encodeURIComponent(z);L===z&&(L=escape(z)),n=n.split(z).join(L)}var N=n.indexOf("#");N!==-1&&(this.hash=n.substr(N),n=n.slice(0,N));var Z=n.indexOf("?");if(Z!==-1?(this.search=n.substr(Z),this.query=n.substr(Z+1),t&&(this.query=O.parse(this.query)),n=n.slice(0,Z)):t&&(this.search="",this.query={}),n&&(this.pathname=n),j[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var $=this.pathname||"",M=this.search||"";this.path=$+M}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(i=O.stringify(this.query));var s=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||j[t])&&o!==!1?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+o+r+s+n},n.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(u(e)){var t=new n;t.parse(e,!1,!0),e=t}var r=new n;if(Object.keys(this).forEach(function(e){r[e]=this[e]},this),r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(r[t]=e[t])}),j[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(e.protocol&&e.protocol!==r.protocol){if(!j[e.protocol])return Object.keys(e).forEach(function(t){r[t]=e[t]}),r.href=r.format(),r;if(r.protocol=e.protocol,e.host||S[e.protocol])r.pathname=e.pathname;else{for(var o=(e.pathname||"").split("/");o.length&&!(e.host=o.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),r.pathname=o.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var i=r.pathname||"",s=r.search||"";r.path=i+s}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var a=r.pathname&&"/"===r.pathname.charAt(0),c=e.host||e.pathname&&"/"===e.pathname.charAt(0),l=c||a||r.host&&e.pathname,p=l,d=r.pathname&&r.pathname.split("/")||[],o=e.pathname&&e.pathname.split("/")||[],m=r.protocol&&!j[r.protocol];if(m&&(r.hostname="",r.port=null,r.host&&(""===d[0]?d[0]=r.host:d.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===o[0]?o[0]=e.host:o.unshift(e.host)),e.host=null),l=l&&(""===o[0]||""===d[0])),c)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,d=o;else if(o.length)d||(d=[]),d.pop(),d=d.concat(o),r.search=e.search,r.query=e.query;else if(!f(e.search)){if(m){r.hostname=r.host=d.shift();var y=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");y&&(r.auth=y.shift(),r.host=r.hostname=y.shift())}return r.search=e.search,r.query=e.query,h(r.pathname)&&h(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!d.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var v=d.slice(-1)[0],g=(r.host||e.host)&&("."===v||".."===v)||""===v,b=0,w=d.length;w>=0;w--)v=d[w],"."==v?d.splice(w,1):".."===v?(d.splice(w,1),b++):b&&(d.splice(w,1),b--);if(!l&&!p)for(;b--;b)d.unshift("..");!l||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),g&&"/"!==d.join("/").substr(-1)&&d.push("");var A=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(m){r.hostname=r.host=A?"":d.length?d.shift():"";var y=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");y&&(r.auth=y.shift(),r.host=r.hostname=y.shift())}return l=l||r.host&&d.length,l&&!A&&d.unshift(""),d.length?r.pathname=d.join("/"):(r.pathname=null,r.path=null),h(r.pathname)&&h(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=d.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){var n;(function(e,o){!function(i){function s(e){throw RangeError(R[e])}function a(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function u(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(C,".");var o=e.split("."),i=a(o,t).join(".");return n+i}function c(e){for(var t,r,n=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(r=e.charCodeAt(o++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--)):n.push(t);return n}function h(e){return a(e,function(e){var t="";return e>65535&&(e-=65536,t+=k(e>>>10&1023|55296),e=56320|1023&e),t+=k(e)}).join("")}function f(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:A}function l(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function p(e,t,r){var n=0;for(e=r?q(e/j):e>>1,e+=q(e/t);e>U*E>>1;n+=A)e=q(e/U);return q(n+(U+1)*e/(e+S))}function d(e){var t,r,n,o,i,a,u,c,l,d,m=[],y=e.length,v=0,g=_,b=O;for(r=e.lastIndexOf(P),r<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&s("not-basic"),m.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<y;){for(i=v,a=1,u=A;o>=y&&s("invalid-input"),c=f(e.charCodeAt(o++)),(c>=A||c>q((w-v)/a))&&s("overflow"),v+=c*a,l=u<=b?x:u>=b+E?E:u-b,!(c<l);u+=A)d=A-l,a>q(w/d)&&s("overflow"),a*=d;t=m.length+1,b=p(v-i,t,0==i),q(v/t)>w-g&&s("overflow"),g+=q(v/t),v%=t,m.splice(v++,0,g)}return h(m)}function m(e){var t,r,n,o,i,a,u,h,f,d,m,y,v,g,b,S=[];for(e=c(e),y=e.length,t=_,r=0,i=O,a=0;a<y;++a)m=e[a],m<128&&S.push(k(m));for(n=o=S.length,o&&S.push(P);n<y;){for(u=w,a=0;a<y;++a)m=e[a],m>=t&&m<u&&(u=m);for(v=n+1,u-t>q((w-r)/v)&&s("overflow"),r+=(u-t)*v,t=u,a=0;a<y;++a)if(m=e[a],m<t&&++r>w&&s("overflow"),m==t){for(h=r,f=A;d=f<=i?x:f>=i+E?E:f-i,!(h<d);f+=A)b=h-d,g=A-d,S.push(k(l(d+b%g,0))),h=q(b/g);S.push(k(l(h,0))),i=p(r,v,n==o),r=0,++n}++r,++t}return S.join("")}function y(e){return u(e,function(e){return T.test(e)?d(e.slice(4).toLowerCase()):e})}function v(e){return u(e,function(e){
return I.test(e)?"xn--"+m(e):e})}var g=("object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof o&&o);g.global!==g&&g.window!==g&&g.self!==g||(i=g);var b,w=2147483647,A=36,x=1,E=26,S=38,j=700,O=72,_=128,P="-",T=/^xn--/,I=/[^\x20-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},U=A-x,q=Math.floor,k=String.fromCharCode;b={version:"1.3.2",ucs2:{decode:c,encode:h},decode:d,encode:m,toASCII:v,toUnicode:y},n=function(){return b}.call(t,r,t,e),!(void 0!==n&&(e.exports=n))}(this)}).call(t,r(17)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,r){"use strict";t.decode=t.parse=r(19),t.encode=t.stringify=r(20)},function(e,t){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var s=/\+/g;e=e.split(t);var a=1e3;o&&"number"==typeof o.maxKeys&&(a=o.maxKeys);var u=e.length;a>0&&u>a&&(u=a);for(var c=0;c<u;++c){var h,f,l,p,d=e[c].replace(s,"%20"),m=d.indexOf(n);m>=0?(h=d.substr(0,m),f=d.substr(m+1)):(h=d,f=""),l=decodeURIComponent(h),p=decodeURIComponent(f),r(i,l)?Array.isArray(i[l])?i[l].push(p):i[l]=[i[l],p]:i[l]=p}return i}},function(e,t){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,o){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(o){var i=encodeURIComponent(r(o))+n;return Array.isArray(e[o])?e[o].map(function(e){return i+encodeURIComponent(r(e))}).join(t):i+encodeURIComponent(r(e[o]))}).join(t):o?encodeURIComponent(r(o))+n+encodeURIComponent(r(e)):""}},function(e,t,r){"use strict";function n(e,t,r,n){return this.validateSchema(e,n,t,r).valid}function o(e,t,r,n,o,i){if(!t.properties||void 0===t.properties[o])if(t.additionalProperties===!1)i.addError({name:"additionalProperties",argument:o,message:"additionalProperty "+JSON.stringify(o)+" exists in instance when not allowed"});else{var s=t.additionalProperties||{},a=this.validateSchema(e[o],s,r,n.makeChild(s,o));a.instance!==i.instance[o]&&(i.instance[o]=a.instance),i.importErrors(a)}}function i(e,t,r){var n,o=r.length;for(n=t+1,o;n<o;n++)if(s.deepCompareStrict(e,r[n]))return!1;return!0}var s=r(22),a=s.ValidatorResult,u=s.SchemaError,c={};c.ignoreProperties={id:!0,"default":!0,description:!0,title:!0,exclusiveMinimum:!0,exclusiveMaximum:!0,additionalItems:!0,$schema:!0,$ref:!0,"extends":!0};var h=c.validators={};h.type=function(e,t,r,n){if(void 0===e)return null;var o=new a(e,t,r,n),i=t.type instanceof Array?t.type:[t.type];if(!i.some(this.testType.bind(this,e,t,r,n))){var s=i.map(function(e){return e.id&&"<"+e.id+">"||e+""});o.addError({name:"type",argument:s,message:"is not of a type(s) "+s})}return o},h.anyOf=function(e,t,r,o){if(void 0===e)return null;var i=new a(e,t,r,o);if(!(t.anyOf instanceof Array))throw new u("anyOf must be an array");if(!t.anyOf.some(n.bind(this,e,r,o))){var s=t.anyOf.map(function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"});i.addError({name:"anyOf",argument:s,message:"is not any of "+s.join(",")})}return i},h.allOf=function(e,t,r,n){if(void 0===e)return null;if(!(t.allOf instanceof Array))throw new u("allOf must be an array");var o=new a(e,t,r,n),i=this;return t.allOf.forEach(function(t,s){var a=i.validateSchema(e,t,r,n);if(!a.valid){var u=t.id&&"<"+t.id+">"||t.title&&JSON.stringify(t.title)||t.$ref&&"<"+t.$ref+">"||"[subschema "+s+"]";o.addError({name:"allOf",argument:{id:u,length:a.errors.length,valid:a},message:"does not match allOf schema "+u+" with "+a.errors.length+" error[s]:"}),o.importErrors(a)}}),o},h.oneOf=function(e,t,r,o){if(void 0===e)return null;if(!(t.oneOf instanceof Array))throw new u("oneOf must be an array");var i=new a(e,t,r,o),s=t.oneOf.filter(n.bind(this,e,r,o)).length,c=t.oneOf.map(function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"});return 1!==s&&i.addError({name:"oneOf",argument:c,message:"is not exactly one from "+c.join(",")}),i},h.properties=function(e,t,r,n){if(void 0!==e&&e instanceof Object){var o=new a(e,t,r,n),i=t.properties||{};for(var s in i){var u=(e||void 0)&&e[s],c=this.validateSchema(u,i[s],r,n.makeChild(i[s],s));c.instance!==o.instance[s]&&(o.instance[s]=c.instance),o.importErrors(c)}return o}},h.patternProperties=function(e,t,r,n){if(void 0!==e&&this.types.object(e)){var i=new a(e,t,r,n),s=t.patternProperties||{};for(var u in e){var c=!0;for(var h in s){var f=new RegExp(h);if(f.test(u)){c=!1;var l=this.validateSchema(e[u],s[h],r,n.makeChild(s[h],u));l.instance!==i.instance[u]&&(i.instance[u]=l.instance),i.importErrors(l)}}c&&o.call(this,e,t,r,n,u,i)}return i}},h.additionalProperties=function(e,t,r,n){if(void 0!==e&&this.types.object(e)){if(t.patternProperties)return null;var i=new a(e,t,r,n);for(var s in e)o.call(this,e,t,r,n,s,i);return i}},h.minProperties=function(e,t,r,n){if(!e||"object"!=typeof e)return null;var o=new a(e,t,r,n),i=Object.keys(e);return i.length>=t.minProperties||o.addError({name:"minProperties",argument:t.minProperties,message:"does not meet minimum property length of "+t.minProperties}),o},h.maxProperties=function(e,t,r,n){if(!e||"object"!=typeof e)return null;var o=new a(e,t,r,n),i=Object.keys(e);return i.length<=t.maxProperties||o.addError({name:"maxProperties",argument:t.maxProperties,message:"does not meet maximum property length of "+t.maxProperties}),o},h.items=function(e,t,r,n){if(!(e instanceof Array))return null;var o=this,i=new a(e,t,r,n);return void 0!==e&&t.items?(e.every(function(e,s){var a=t.items instanceof Array?t.items[s]||t.additionalItems:t.items;if(void 0===a)return!0;if(a===!1)return i.addError({name:"items",message:"additionalItems not permitted"}),!1;var u=o.validateSchema(e,a,r,n.makeChild(a,s));return u.instance!==i.instance[s]&&(i.instance[s]=u.instance),i.importErrors(u),!0}),i):i},h.minimum=function(e,t,r,n){if("number"!=typeof e)return null;var o=new a(e,t,r,n),i=!0;return i=t.exclusiveMinimum&&t.exclusiveMinimum===!0?e>t.minimum:e>=t.minimum,i||o.addError({name:"minimum",argument:t.minimum,message:"must have a minimum value of "+t.minimum}),o},h.maximum=function(e,t,r,n){if("number"!=typeof e)return null;var o,i=new a(e,t,r,n);return o=t.exclusiveMaximum&&t.exclusiveMaximum===!0?e<t.maximum:e<=t.maximum,o||i.addError({name:"maximum",argument:t.maximum,message:"must have a maximum value of "+t.maximum}),i},h.divisibleBy=function(e,t,r,n){if("number"!=typeof e)return null;if(0==t.divisibleBy)throw new u("divisibleBy cannot be zero");var o=new a(e,t,r,n);return e/t.divisibleBy%1&&o.addError({name:"divisibleBy",argument:t.divisibleBy,message:"is not divisible by (multiple of) "+JSON.stringify(t.divisibleBy)}),o},h.multipleOf=function(e,t,r,n){if("number"!=typeof e)return null;if(0==t.multipleOf)throw new u("multipleOf cannot be zero");var o=new a(e,t,r,n);return e/t.multipleOf%1&&o.addError({name:"multipleOf",argument:t.multipleOf,message:"is not a multiple of (divisible by) "+JSON.stringify(t.multipleOf)}),o},h.required=function(e,t,r,n){var o=new a(e,t,r,n);return void 0===e&&t.required===!0?o.addError({name:"required",message:"is required"}):e&&"object"==typeof e&&Array.isArray(t.required)&&t.required.forEach(function(t){void 0===e[t]&&o.addError({name:"required",argument:t,message:"requires property "+JSON.stringify(t)})}),o},h.pattern=function(e,t,r,n){if("string"!=typeof e)return null;var o=new a(e,t,r,n);return e.match(t.pattern)||o.addError({name:"pattern",argument:t.pattern,message:"does not match pattern "+JSON.stringify(t.pattern)}),o},h.format=function(e,t,r,n){var o=new a(e,t,r,n);return o.disableFormat||s.isFormat(e,t.format,this)||o.addError({name:"format",argument:t.format,message:"does not conform to the "+JSON.stringify(t.format)+" format"}),o},h.minLength=function(e,t,r,n){if("string"!=typeof e)return null;var o=new a(e,t,r,n);return e.length>=t.minLength||o.addError({name:"minLength",argument:t.minLength,message:"does not meet minimum length of "+t.minLength}),o},h.maxLength=function(e,t,r,n){if("string"!=typeof e)return null;var o=new a(e,t,r,n);return e.length<=t.maxLength||o.addError({name:"maxLength",argument:t.maxLength,message:"does not meet maximum length of "+t.maxLength}),o},h.minItems=function(e,t,r,n){if(!(e instanceof Array))return null;var o=new a(e,t,r,n);return e.length>=t.minItems||o.addError({name:"minItems",argument:t.minItems,message:"does not meet minimum length of "+t.minItems}),o},h.maxItems=function(e,t,r,n){if(!(e instanceof Array))return null;var o=new a(e,t,r,n);return e.length<=t.maxItems||o.addError({name:"maxItems",argument:t.maxItems,message:"does not meet maximum length of "+t.maxItems}),o},h.uniqueItems=function(e,t,r,n){function o(e,t,r){for(var n=t+1;n<r.length;n++)if(s.deepCompareStrict(e,r[n]))return!1;return!0}var i=new a(e,t,r,n);return e instanceof Array?(e.every(o)||i.addError({name:"uniqueItems",message:"contains duplicate item"}),i):i},h.uniqueItems=function(e,t,r,n){if(!(e instanceof Array))return null;var o=new a(e,t,r,n);return e.every(i)||o.addError({name:"uniqueItems",message:"contains duplicate item"}),o},h.dependencies=function(e,t,r,n){if(!e||"object"!=typeof e)return null;var o=new a(e,t,r,n);for(var i in t.dependencies)if(void 0!==e[i]){var s=t.dependencies[i],u=n.makeChild(s,i);if("string"==typeof s&&(s=[s]),s instanceof Array)s.forEach(function(t){void 0===e[t]&&o.addError({name:"dependencies",argument:u.propertyPath,message:"property "+t+" not found, required by "+u.propertyPath})});else{var c=this.validateSchema(e,s,r,u);o.instance!==c.instance&&(o.instance=c.instance),c&&c.errors.length&&(o.addError({name:"dependencies",argument:u.propertyPath,message:"does not meet dependency required by "+u.propertyPath}),o.importErrors(c))}}return o},h["enum"]=function(e,t,r,n){if(!(t["enum"]instanceof Array))throw new u("enum expects an array",t);if(void 0===e)return null;var o=new a(e,t,r,n);return t["enum"].some(s.deepCompareStrict.bind(null,e))||o.addError({name:"enum",argument:t["enum"],message:"is not one of enum values: "+t["enum"].join(",")}),o},h.not=h.disallow=function(e,t,r,n){var o=this;if(void 0===e)return null;var i=new a(e,t,r,n),s=t.not||t.disallow;return s?(s instanceof Array||(s=[s]),s.forEach(function(s){if(o.testType(e,t,r,n,s)){var a=s&&s.id&&"<"+s.id+">"||s;i.addError({name:"not",argument:a,message:"is of prohibited type "+a})}}),i):null},e.exports=c},function(e,t,r){"use strict";var n=r(15),o=t.ValidationError=function(e,t,r,n,o,i){n&&(this.property=n),e&&(this.message=e),r&&(r.id?this.schema=r.id:this.schema=r),t&&(this.instance=t),this.name=o,this.argument=i,this.stack=this.toString()};o.prototype.toString=function(){return this.property+" "+this.message};var i=t.ValidatorResult=function(e,t,r,n){this.instance=e,this.schema=t,this.propertyPath=n.propertyPath,this.errors=[],this.throwError=r&&r.throwError,this.disableFormat=r&&r.disableFormat===!0};i.prototype.addError=function(e){var t;if("string"==typeof e)t=new o(e,this.instance,this.schema,this.propertyPath);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");t=new o(e.message,this.instance,this.schema,this.propertyPath,e.name,e.argument)}if(this.throwError)throw t;return this.errors.push(t),t},i.prototype.importErrors=function(e){if("string"==typeof e||e&&e.validatorType)this.addError(e);else if(e&&e.errors){var t=this.errors;e.errors.forEach(function(e){t.push(e)})}},i.prototype.toString=function(e){return this.errors.map(function(e,t){return t+": "+e.toString()+"\n"}).join("")},Object.defineProperty(i.prototype,"valid",{get:function(){return!this.errors.length}});var s=t.SchemaError=function h(e,t){this.message=e,this.schema=t,Error.call(this,e),Error.captureStackTrace(this,h)};s.prototype=Object.create(Error.prototype,{constructor:{value:s,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var a=t.SchemaContext=function(e,t,r,n,o){this.schema=e,this.options=t,this.propertyPath=r,this.base=n,this.schemas=o};a.prototype.resolve=function(e){return n.resolve(this.base,e)},a.prototype.makeChild=function(e,t){var r=void 0===t?this.propertyPath:this.propertyPath+c(t),o=n.resolve(this.base,e.id||""),i=new a(e,this.options,r,o,Object.create(this.schemas));return e.id&&!i.schemas[o]&&(i.schemas[o]=e),i};var u=t.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(e){return"string"==typeof e&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)},regex:function(e){var t=!0;try{new RegExp(e)}catch(r){t=!1}return t},style:/\s*(.+?):\s*([^;]+);?/g,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};u.regexp=u.regex,u.pattern=u.regex,u.ipv4=u["ip-address"],t.isFormat=function(e,t,r){if("string"==typeof e&&void 0!==u[t]){if(u[t]instanceof RegExp)return u[t].test(e);if("function"==typeof u[t])return u[t](e)}else if(r&&r.customFormats&&"function"==typeof r.customFormats[t])return r.customFormats[t](e);return!0};var c=t.makeSuffix=function(e){return e=e.toString(),e.match(/[.\s\[\]]/)||e.match(/^[\d]/)?e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]":"."+e};t.deepCompareStrict=function f(e,t){if(typeof e!=typeof t)return!1;if(e instanceof Array)return t instanceof Array&&(e.length===t.length&&e.every(function(r,n){return f(e[n],t[n])}));if("object"==typeof e){if(!e||!t)return e===t;var r=Object.keys(e),n=Object.keys(t);return r.length===n.length&&r.every(function(r){return f(e[r],t[r])})}return e===t},e.exports.deepMerge=function l(e,t){var r=Array.isArray(t),n=r&&[]||{};return r?(e=e||[],n=n.concat(e),t.forEach(function(t,r){"object"==typeof t?n[r]=l(e[r],t):e.indexOf(t)===-1&&n.push(t)})):(e&&"object"==typeof e&&Object.keys(e).forEach(function(t){n[t]=e[t]}),Object.keys(t).forEach(function(r){"object"==typeof t[r]&&t[r]&&e[r]?n[r]=l(e[r],t[r]):n[r]=t[r]})),n},t.objectGetPath=function(e,t){for(var r,n=t.split("/").slice(1);"string"==typeof(r=n.shift());){var o=decodeURIComponent(r.replace(/~0/,"~").replace(/~1/g,"/"));if(!(o in e))return;e=e[o]}return e},t.encodePath=function(e){return e.map(function(e){return"/"+encodeURIComponent(e).replace(/~/g,"%7E")}).join("")}},function(e,t){e.exports={user:{type:"object",properties:{id:{type:"string"},accountId:{type:"string"},email:{type:"string"},firstName:{type:"string"},lastName:{type:"string"},imageUrl:{type:"string"},referralCode:{type:"string"},locale:{type:"string"}},required:["id","accountId"]},userLookUp:{type:"object",properties:{id:{type:"string"},accountId:{type:"string"}},required:["id","accountId"]},userReferralCode:{type:"object",properties:{referralCode:{type:"string"}},required:["referralCode"]},applyReferralCode:{type:"object",properties:{id:{type:"string"},accountId:{type:"string"},referralCode:{type:"string"}},required:["id","accountId","referralCode"]},cookieUser:{type:"object",properties:{widgetType:{type:"string","default":""},engagementMedium:{type:"string","default":""}}},upsertUser:{type:"object",properties:{user:{type:"object",properties:{id:{type:"string"},accountId:{type:"string"},email:{type:"string"},firstName:{type:"string"},lastName:{type:"string"},imageUrl:{type:"string"},referredBy:{type:"object",properties:{code:{type:"string"},isConverted:{type:"boolean"}}},locale:{type:"string"},paymentProviderId:{type:"string"}},required:["id","accountId"]},widgetType:{type:"string","default":""},engagementMedium:{type:"string","default":""}},required:["user"]}}}])});