!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.squatch=e():t.squatch=e()}(window,function(){var t=Math.abs,e=Math.round;return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(e){return t[e]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=18)}([function(t,e,n){(function(r){function o(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==r&&"env"in r&&(t=r.env.DEBUG),t}(e=t.exports=n(21)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),n){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var o=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"===t||"%c"===t&&(i=++o)}),t.splice(i,0,r)}},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=o,e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(o())}).call(this,n(20))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5);e.doRequest=function(t,e){void 0===e&&(e="");var n={Accept:"application/json","Content-Type":"application/json"};return e&&(n["X-SaaSquatch-User-Token"]=e),r.get(t).withCredentials().set(n).then(function(t){return t.headers["content-type"]&&t.headers["content-type"].toLowerCase().includes("application/json")?JSON.parse(t.text):t.text},function(t){var e=t.response;throw JSON.parse(e.text)})},e.doPost=function(t,e){return r.post(t).send(e).set({Accept:"application/json","Content-Type":"application/json"}).then(function(t){return t.text})},e.doPut=function(t,e,n){var o={Accept:"application/json","Content-Type":"application/json","X-SaaSquatch-Referrer":window?window.location.href:""};return n&&(o["X-SaaSquatch-User-Token"]=n),r.put(t).withCredentials().send(e).set(o).then(function(t){var e=t.text;return JSON.parse(e)},function(t){var e;try{e=JSON.parse(t.response.text)}catch(e){throw t||e}throw e})}},function(t){"use strict";t.exports=function(t){return null!==t&&"object"==typeof t}},function(t,e,n){"use strict";function r(t){var e=t.widgetType,n=t.engagementMedium;return(e?"?widgetType="+encodeURIComponent(e):null)+((e?"&":"?")+"engagementMedium="+encodeURIComponent(n))}Object.defineProperty(e,"__esModule",{value:!0}),n(4);var o=n(1),i=function(){function t(t){var e=t.tenantAlias,n=t.domain;if(!e)throw new Error("tenantAlias not provided");this.tenantAlias=e,this.domain=n||"https://app.referralsaasquatch.com"}return t.prototype.cookieUser=function(t){var e=t.widgetType,n=t.engagementMedium,i=void 0===n?"POPUP":n,s=t.jwt,a=t.user,c=encodeURIComponent(this.tenantAlias),u=r({widgetType:e,engagementMedium:i}),l=this.domain+"/api/v1/"+c+"/widget/user/cookie_user"+u;return o.doPut(l,JSON.stringify(a||{}),s)},t.prototype.upsertUser=function(t){var e=t.widgetType,n=t.engagementMedium,i=void 0===n?"POPUP":n,s=t.jwt,a=t.user,c=encodeURIComponent(this.tenantAlias),u=encodeURIComponent(a.accountId),l=encodeURIComponent(a.id),d=r({widgetType:e,engagementMedium:i}),h=this.domain+"/api/v1/"+c+"/widget/account/"+u+"/user/"+l+"/upsert"+d;return o.doPut(h,JSON.stringify(a),s)},t.prototype.render=function(t){var e=t.widgetType,n=t.engagementMedium,i=void 0===n?"POPUP":n,s=t.jwt,a=t.user,c=encodeURIComponent(this.tenantAlias),u=encodeURIComponent(a.accountId),l=encodeURIComponent(a.id),d=r({widgetType:e,engagementMedium:i}),h=this.domain+"/api/v1/"+c+"/widget/account/"+u+"/user/"+l+"/render"+d;return o.doRequest(h,s)},t.prototype.invite=function(t){var e=t.emailList,n=void 0===e?[]:e,r=t.userId,i=t.accountId,s=t.tenantAlias,a=encodeURIComponent(s),c=this.domain+"/api/v1/"+a+"/mail/referralinvite";return o.doPost(c,JSON.stringify({sendingAccountId:i,sendingUserId:r,recipients:n}))},t.prototype.squatchReferralCookie=function(){var t=encodeURIComponent(this.tenantAlias),e=this.domain+"/a/"+t+"/widgets/squatchcookiejson";return o.doRequest(e)},t}();e.default=i},function(){var t=String.prototype;t.includes||function(){"use strict";var e={}.toString,n=function(){try{var t={},e=Object.defineProperty,n=e(t,t,t)&&e}catch(t){}return n}(),r="".indexOf,o=function(t){if(null==this)throw TypeError();var n=this+"";if(t&&"[object RegExp]"==e.call(t))throw TypeError();var o=n.length,i=t+"",s=i.length,a=1<arguments.length?arguments[1]:void 0,c=a?+a:0;return c!=c&&(c=0),!(s+Math.min(Math.max(c,0),o)>o)&&-1!=r.call(n,i,c)};n?n(String.prototype,"includes",{value:o,configurable:!0,writable:!0}):t.includes=o}()},function(t,e,n){function r(){}function o(t){if(!f(t))return t;var e=[];for(var n in t)i(e,n,t[n]);return e.join("&")}function i(t,e,n){if(null==n)null===n&&t.push(encodeURIComponent(e));else if(Array.isArray(n))n.forEach(function(n){i(t,e,n)});else if(f(n))for(var r in n)i(t,e+"["+r+"]",n[r]);else t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}function s(t){for(var e,n,r={},o=t.split("&"),i=0,s=o.length;i<s;++i)-1==(n=(e=o[i]).indexOf("="))?r[decodeURIComponent(e)]="":r[decodeURIComponent(e.slice(0,n))]=decodeURIComponent(e.slice(n+1));return r}function a(t){return/[\/+]json($|[^-\w])/.test(t)}function c(t){this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var e=this.xhr.status;1223===e&&(e=204),this._setStatusProperties(e),this.header=this.headers=function(t){for(var e,n,r,o,i=t.split(/\r?\n/),s={},a=0,c=i.length;a<c;++a)-1!==(e=(n=i[a]).indexOf(":"))&&(r=n.slice(0,e).toLowerCase(),o=g(n.slice(e+1)),s[r]=o);return s}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.body=null===this.text&&t._responseType?this.xhr.response:"HEAD"==this.req.method?null:this._parseBody(this.text?this.text:this.xhr.response)}function u(t,e){var n=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t,e=null,r=null;try{r=new c(n)}catch(t){return(e=new Error("Parser is unable to parse the response")).parse=!0,e.original=t,n.xhr?(e.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,e.status=n.xhr.status?n.xhr.status:null,e.statusCode=e.status):(e.rawResponse=null,e.status=null),n.callback(e)}n.emit("response",r);try{n._isResponseOK(r)||(t=new Error(r.statusText||"Unsuccessful HTTP response"))}catch(r){t=r}t?(t.original=e,t.response=r,t.status=r.status,n.callback(t,r)):n.callback(null,r)})}function l(t,e,n){var r=v("DELETE",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r}var d;"undefined"==typeof window?"undefined"==typeof self?(console.warn("Using browser-only version of superagent in non-browser environment"),d=this):d=self:d=window;var h=n(6),p=n(7),f=n(2),m=n(8),y=n(10),v=e=t.exports=function(t,n){return"function"==typeof n?new e.Request("GET",t).end(n):1==arguments.length?new e.Request("GET",t):new e.Request(t,n)};e.Request=u,v.getXHR=function(){if(d.XMLHttpRequest&&(!d.location||"file:"!=d.location.protocol||!d.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}throw Error("Browser-only version of superagent could not find XHR")};var g=function(t){return t.trim()};v.serializeObject=o,v.parseString=s,v.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},v.serialize={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},v.parse={"application/x-www-form-urlencoded":s,"application/json":JSON.parse},m(c.prototype),c.prototype._parseBody=function(t){var e=v.parse[this.type];return this.req._parser?this.req._parser(this,t):(!e&&a(this.type)&&(e=v.parse["application/json"]),e&&t&&(t.length||t instanceof Object)?e(t):null)},c.prototype.toError=function(){var t=this.req,e=t.method,n=t.url,r="cannot "+e+" "+n+" ("+this.status+")",o=new Error(r);return o.status=this.status,o.method=e,o.url=n,o},v.Response=c,h(u.prototype),p(u.prototype),u.prototype.type=function(t){return this.set("Content-Type",v.types[t]||t),this},u.prototype.accept=function(t){return this.set("Accept",v.types[t]||t),this},u.prototype.auth=function(t,e,n){return 1===arguments.length&&(e=""),"object"==typeof e&&null!==e&&(n=e,e=""),n||(n={type:"function"==typeof btoa?"basic":"auto"}),this._auth(t,e,n,function(t){if("function"==typeof btoa)return btoa(t);throw new Error("Cannot use basic auth, btoa is not a function")})},u.prototype.query=function(t){return"string"!=typeof t&&(t=o(t)),t&&this._query.push(t),this},u.prototype.attach=function(t,e,n){if(e){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(t,e,n||e.name)}return this},u.prototype._getFormData=function(){return this._formData||(this._formData=new d.FormData),this._formData},u.prototype.callback=function(t,e){if(this._shouldRetry(t,e))return this._retry();var n=this._callback;this.clearTimeout(),t&&(this._maxRetries&&(t.retries=this._retries-1),this.emit("error",t)),n(t,e)},u.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},u.prototype.buffer=u.prototype.ca=u.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},u.prototype.pipe=u.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},u.prototype._isHost=function(t){return t&&"object"==typeof t&&!Array.isArray(t)&&"[object Object]"!==Object.prototype.toString.call(t)},u.prototype.end=function(t){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=t||r,this._finalizeQueryString(),this._end()},u.prototype._end=function(){var t=this,e=this.xhr=v.getXHR(),n=this._formData||this._data;this._setTimeouts(),e.onreadystatechange=function(){var n=e.readyState;if(2<=n&&t._responseTimeoutTimer&&clearTimeout(t._responseTimeoutTimer),4==n){var r;try{r=e.status}catch(t){r=0}return r?void t.emit("end"):t.timedout||t._aborted?void 0:t.crossDomainError()}};var r=function(e,n){0<n.total&&(n.percent=n.loaded/n.total*100),n.direction=e,t.emit("progress",n)};if(this.hasListeners("progress"))try{e.onprogress=r.bind(null,"download"),e.upload&&(e.upload.onprogress=r.bind(null,"upload"))}catch(t){}try{this.username&&this.password?e.open(this.method,this.url,!0,this.username,this.password):e.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(e.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof n&&!this._isHost(n)){var o=this._header["content-type"],i=this._serializer||v.serialize[o?o.split(";")[0]:""];!i&&a(o)&&(i=v.serialize["application/json"]),i&&(n=i(n))}for(var s in this.header)null!=this.header[s]&&this.header.hasOwnProperty(s)&&e.setRequestHeader(s,this.header[s]);return this._responseType&&(e.responseType=this._responseType),this.emit("request",this),e.send(void 0===n?null:n),this},v.agent=function(){return new y},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(t){y.prototype[t.toLowerCase()]=function(e,n){var r=new v.Request(t,e);return this._setDefaults(r),n&&r.end(n),r}}),y.prototype.del=y.prototype.delete,v.get=function(t,e,n){var r=v("GET",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},v.head=function(t,e,n){var r=v("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},v.options=function(t,e,n){var r=v("OPTIONS",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},v.del=l,v.delete=l,v.patch=function(t,e,n){var r=v("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},v.post=function(t,e,n){var r=v("POST",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},v.put=function(t,e,n){var r=v("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r}},function(t){function e(t){if(t)return function(t){for(var n in e.prototype)t[n]=e.prototype[n];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r,o=0;o<n.length;o++)if((r=n[o])===e||r.fn===e){n.splice(o,1);break}return this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var r=0,o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,e);return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){"use strict";function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}var o=n(2);t.exports=r,r.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},r.prototype.parse=function(t){return this._parser=t,this},r.prototype.responseType=function(t){return this._responseType=t,this},r.prototype.serialize=function(t){return this._serializer=t,this},r.prototype.timeout=function(t){if(!t||"object"!=typeof t)return this._timeout=t,this._responseTimeout=0,this;for(var e in t)"deadline"===e?this._timeout=t.deadline:"response"===e?this._responseTimeout=t.response:console.warn("Unknown timeout option",e);return this},r.prototype.retry=function(t,e){return(0===arguments.length||!0===t)&&(t=1),0>=t&&(t=0),this._maxRetries=t,this._retries=0,this._retryCallback=e,this};var i=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];r.prototype._shouldRetry=function(t,e){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(t,e);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(e&&e.status&&500<=e.status&&501!=e.status)return!0;if(t){if(t.code&&~i.indexOf(t.code))return!0;if(t.timeout&&"ECONNABORTED"==t.code)return!0;if(t.crossDomain)return!0}return!1},r.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},r.prototype.then=function(t,e){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(t,e){n.end(function(n,r){n?e(n):t(r)})})}return this._fullfilledPromise.then(t,e)},r.prototype.catch=function(t){return this.then(void 0,t)},r.prototype.use=function(t){return t(this),this},r.prototype.ok=function(t){if("function"!=typeof t)throw Error("Callback required");return this._okCallback=t,this},r.prototype._isResponseOK=function(t){return!!t&&(this._okCallback?this._okCallback(t):200<=t.status&&300>t.status)},r.prototype.get=function(t){return this._header[t.toLowerCase()]},r.prototype.getHeader=r.prototype.get,r.prototype.set=function(t,e){if(o(t)){for(var n in t)this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},r.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},r.prototype.field=function(t,e){if(null===t||void 0===t)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),o(t)){for(var n in t)this.field(n,t[n]);return this}if(Array.isArray(e)){for(var r in e)this.field(t,e[r]);return this}if(null===e||void 0===e)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof e&&(e=""+e),this._getFormData().append(t,e),this},r.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},r.prototype._auth=function(t,e,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(t+":"+e));break;case"auto":this.username=t,this.password=e;break;case"bearer":this.set("Authorization","Bearer "+t)}return this},r.prototype.withCredentials=function(t){return void 0==t&&(t=!0),this._withCredentials=t,this},r.prototype.redirects=function(t){return this._maxRedirects=t,this},r.prototype.maxResponseSize=function(t){if("number"!=typeof t)throw TypeError("Invalid argument");return this._maxResponseSize=t,this},r.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},r.prototype.send=function(t){var e=o(t),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),e&&!this._data)Array.isArray(t)?this._data=[]:!this._isHost(t)&&(this._data={});else if(t&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(e&&o(this._data))for(var r in t)this._data[r]=t[r];else"string"==typeof t?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+t:t:(this._data||"")+t):this._data=t;return!e||this._isHost(t)?this:(n||this.type("json"),this)},r.prototype.sortQuery=function(t){return this._sort=void 0===t||t,this},r.prototype._finalizeQueryString=function(){var t=this._query.join("&");if(t&&(this.url+=(0<=this.url.indexOf("?")?"&":"?")+t),this._query.length=0,this._sort){var e=this.url.indexOf("?");if(0<=e){var n=this.url.substring(e+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,e)+"?"+n.join("&")}}},r.prototype._appendQueryString=function(){console.trace("Unsupported")},r.prototype._timeoutError=function(t,e,n){if(!this._aborted){var r=new Error(t+e+"ms exceeded");r.timeout=e,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},r.prototype._setTimeouts=function(){var t=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){t._timeoutError("Timeout of ",t._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){t._timeoutError("Response timeout of ",t._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},function(t,e,n){"use strict";function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}var o=n(9);t.exports=r,r.prototype.get=function(t){return this.header[t.toLowerCase()]},r.prototype._setHeaderProperties=function(t){var e=t["content-type"]||"";this.type=o.type(e);var n=o.params(e);for(var r in n)this[r]=n[r];this.links={};try{t.link&&(this.links=o.parseLinks(t.link))}catch(t){}},r.prototype._setStatusProperties=function(t){var e=0|t/100;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.redirect=3==e,this.clientError=4==e,this.serverError=5==e,this.error=!(4!=e&&5!=e)&&this.toError(),this.created=201==t,this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.forbidden=403==t,this.notFound=404==t,this.unprocessableEntity=422==t}},function(t,e){"use strict";e.type=function(t){return t.split(/ *; */).shift()},e.params=function(t){return t.split(/ *; */).reduce(function(t,e){var n=e.split(/ *= */),r=n.shift(),o=n.shift();return r&&o&&(t[r]=o),t},{})},e.parseLinks=function(t){return t.split(/ *, */).reduce(function(t,e){var n=e.split(/ *; */),r=n[0].slice(1,-1);return t[n[1].split(/ *= */)[1].slice(1,-1)]=r,t},{})},e.cleanHeader=function(t,e){return delete t["content-type"],delete t["content-length"],delete t["transfer-encoding"],delete t.host,e&&(delete t.authorization,delete t.cookie),t}},function(t){function e(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(t){e.prototype[t]=function(){return this._defaults.push({fn:t,arguments:arguments}),this}}),e.prototype._setDefaults=function(t){this._defaults.forEach(function(e){t[e.fn].apply(t,e.arguments)})},t.exports=e},function(n,r,o){"use strict";o.r(r),function(n){function o(t){return parseFloat(t)||0}function i(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];return e.reduce(function(e,n){return e+o(t["border-"+n+"-width"])},0)}function s(n){var r=n.clientWidth,s=n.clientHeight;if(!r&&!s)return g;var a=v(n).getComputedStyle(n),u=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n+=1){var i=r[n],s=t["padding-"+i];e[i]=o(s)}return e}(a),l=u.left+u.right,d=u.top+u.bottom,h=o(a.width),p=o(a.height);if("border-box"===a.boxSizing&&(e(h+l)!==r&&(h-=i(a,"left","right")+l),e(p+d)!==s&&(p-=i(a,"top","bottom")+d)),!function(t){return t===v(t).document.documentElement}(n)){var f=e(h+l)-r,m=e(p+d)-s;1!==t(f)&&(h-=f),1!==t(m)&&(p-=m)}return c(u.left,u.top,h,p)}function a(t){return l?w(t)?function(t){var e=t.getBBox();return c(0,0,e.width,e.height)}(t):s(t):g}function c(t,e,n,r){return{x:t,y:e,width:n,height:r}}var u=function(){function t(t,e){var n=-1;return t.some(function(t,r){return t[0]===e&&(n=r,!0)}),n}return"undefined"==typeof Map?function(){function e(){this.__entries__=[]}var n={size:{configurable:!0}};return n.size.get=function(){return this.__entries__.length},e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n,r=0,o=this.__entries__;r<o.length;r+=1)n=o[r],t.call(e,n[1],n[0])},Object.defineProperties(e.prototype,n),e}():Map}(),l="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,d=void 0!==n&&n.Math===Math?n:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),h="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(d):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},p=["top","right","bottom","left","width","height","size","weight"],f="undefined"!=typeof MutationObserver,m=function(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){function n(){i&&(i=!1,t()),s&&o()}function r(){h(n)}function o(){var t=Date.now();if(i){if(t-a<2)return;s=!0}else i=!0,s=!1,setTimeout(r,e);a=t}var i=!1,s=!1,a=0;return o}(this.refresh.bind(this),20)};m.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},m.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},m.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},m.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),0<t.length},m.prototype.connect_=function(){!l||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),f?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},m.prototype.disconnect_=function(){l&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},m.prototype.onTransitionEnd_=function(t){var e=t.propertyName;void 0===e&&(e=""),p.some(function(t){return!!~e.indexOf(t)})&&this.refresh()},m.getInstance=function(){return this.instance_||(this.instance_=new m),this.instance_},m.instance_=null;var y=function(t,e){for(var n,r=0,o=Object.keys(e);r<o.length;r+=1)n=o[r],Object.defineProperty(t,n,{value:e[n],enumerable:!1,writable:!1,configurable:!0});return t},v=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||d},g=c(0,0,0,0),w="undefined"==typeof SVGGraphicsElement?function(t){return t instanceof v(t).SVGElement&&"function"==typeof t.getBBox}:function(t){return t instanceof v(t).SVGGraphicsElement},b=function(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=c(0,0,0,0),this.target=t};b.prototype.isActive=function(){var t=a(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},b.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t};var _=function(t,e){var n=function(t){var e=t.x,n=t.y,r=t.width,o=t.height,i="undefined"==typeof DOMRectReadOnly?Object:DOMRectReadOnly,s=Object.create(i.prototype);return y(s,{x:e,y:n,width:r,height:o,top:n,right:e+r,bottom:o+n,left:e}),s}(e);y(this,{target:t,contentRect:n})},E=function(t,e,n){if(this.activeObservations_=[],this.observations_=new u,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n};E.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof v(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new b(t)),this.controller_.addObserver(this),this.controller_.refresh())}},E.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof v(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),!e.size&&this.controller_.removeObserver(this))}},E.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},E.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},E.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new _(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},E.prototype.clearActive=function(){this.activeObservations_.splice(0)},E.prototype.hasActive=function(){return 0<this.activeObservations_.length};var T="undefined"==typeof WeakMap?new u:new WeakMap,x=function(t){if(!(this instanceof x))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var e=m.getInstance(),n=new E(t,e,this);T.set(this,n)};["observe","unobserve","disconnect"].forEach(function(t){x.prototype[t]=function(){return(e=T.get(this))[t].apply(e,arguments);var e}});var O=void 0===d.ResizeObserver?x:d.ResizeObserver;r.default=O}.call(this,o(25))},function(t,e,n){"use strict";
/*!
  * 1domready (c) Dustin Diaz 2014 - License MIT
  *
  */function r(t,e){let n,r=[],o=t,i="DOMContentLoaded",s=(o.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(o.readyState);return s||o.addEventListener(i,n=(()=>{for(o.removeEventListener(i,n),s=!0;n=r.shift();)n()})),s?setTimeout(e,0):r.push(e)}n.r(e),n.d(e,"domready",function(){return r})},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i=n(11),s=n(15),a=n(12),c=o.default("squatch-js:POPUPwidget"),u=function(t){function e(e,n){void 0===n&&(n=".squatchpop");var r=t.call(this,e)||this;return r.triggerElement=document.querySelector(n),r.triggerElement&&(r.triggerElement.onclick=function(){r.open()}),r.triggerWhenCTA=document.querySelector(".squatchpop"),"#cta"===n&&r.triggerWhenCTA&&(r.triggerWhenCTA.onclick=function(){r.open()}),r.popupdiv=document.createElement("div"),r.popupdiv.id="squatchModal",r.popupdiv.setAttribute("style","display: none; position: fixed; z-index: 1; padding-top: 5%; left: 0; top: -2000px; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);"),r.popupcontent=document.createElement("div"),r.popupcontent.setAttribute("style","margin: auto; width: 80%; max-width: 500px; position: relative;"),r.popupdiv.onclick=function(t){r._clickedOutside(t)},r}return r(e,t),e.prototype.load=function(){this.popupdiv.appendChild(this.popupcontent),document.body.appendChild(this.popupdiv),this.popupcontent.appendChild(this.frame);var t=this.frame.contentWindow.document;t.open(),t.write(this.content),t.close(),c("Popup template loaded into iframe"),this._setupResizeHandler()},e.prototype.reload=function(t,e){var n=this,r=t.email,o=t.firstName,i=t.lastName,s=this.frame.contentWindow.document;this.widgetApi.cookieUser({user:{email:r||null,firstName:o||null,lastName:i||null},engagementMedium:"POPUP",widgetType:this.type,jwt:e}).then(function(t){var e=t.template;if(e){n.content=e;var o=s.createElement("button"),i=s.getElementsByClassName("squatch-register")[0];i&&(o.className="btn btn-primary",o.id="show-stats-btn",o.textContent="REFERRER_WIDGET"===n.type?"Show Stats":"Show Reward",o.setAttribute("style","margin-top: 10px; max-width: 130px; width: 100%;"),o.onclick=function(){n.load(),n.open()},i.style.paddingTop="30px",i.innerHTML="<p><strong>"+r+"</strong><br>Has been successfully registered</p>",i.appendChild(o))}}).catch(function(t){var e=t.message;c(""+e)})},e.prototype._setupResizeHandler=function(){var t=this,e=this.popupdiv,n=this.frame,r=n.contentWindow.document;a.domready(r,function(){r.body.style.overflowY="hidden",e.style.visibility="hidden",e.style.display="block",e.style.top="0",n.height=r.body.offsetHeight+"px",new i.default(function(t){for(var o=0,i=t;o<i.length;o++){var s=i[o],a=s.target,u=s.contentRect.height,l=r.getElementsByClassName("squatch-referrals"),d=0;if(l&&0!==l.length){var h=l[0];h instanceof HTMLElement?d=h.offsetHeight:c("Referrals element has no offset height")}else c("Can't find element .squatch-referrals");var p=u-d;if(0<p&&(n.height=p+""),e.style.paddingTop=window.innerHeight>n.height?(window.innerHeight-n.height)/2+"px":"5px",!(a instanceof HTMLElement)){c("Popup target can't be styled");break}a.style.width="100%",a.style.height=p+"px"}}).observe(t._findInnerContainer())})},e.prototype.open=function(){var t=this,e=this.popupdiv,n=this.frame.contentWindow;if(!n)throw new Error("Squatch.js has an empty iframe");var r=n.document;a.domready(r,function(){var o=n.squatch,i=r.getElementById("cta");i&&i.parentNode.removeChild(i),e.style.visibility="visible",t._loadEvent(o),c("Popup opened")})},e.prototype.close=function(){this.popupdiv.style.visibility="hidden",c("Popup closed")},e.prototype._clickedOutside=function(t){t.target===this.popupdiv&&this.close()},e.prototype._error=function(e,n,r){return void 0===n&&(n="modal"),void 0===r&&(r=""),t.prototype._error.call(this,e,n,r||"body { margin: 0; } .modal { box-shadow: none; border: 0; }")},e}(s.default);e.default=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i=n(11),s=n(15),a=n(12),c=o.default("squatch-js:EMBEDwidget"),u=function(t){function e(e,n){void 0===n&&(n="#squatchembed");var r=t.call(this,e)||this,o=document.querySelector(n)||document.querySelector(".squatchembed");if(!o)throw new Error("element with selector '"+n+"' not found.'");return r.element=o,r}return r(e,t),e.prototype.load=function(){var t=this;this.element.firstChild&&"#text"!==this.element.firstChild.nodeName||this.element.appendChild(this.frame);var e=this.frame.contentWindow;if(!e)throw new Error("Frame needs a content window");var n=e.document;n.open(),n.write(this.content),n.close(),a.domready(n,function(){var r=e.squatch,o=n.getElementById("cta");if(o){if(!o.parentNode)throw new Error("ctaElement needs a parentNode");o.parentNode.removeChild(o)}t.frame.height=n.body.scrollHeight,new i.default(function(e){for(var n=0,r=e;n<r.length;n++){var o=r[n].contentRect.height;t.frame.height=o}}).observe(t._findInnerContainer()),t._loadEvent(r),c("loaded")})},e.prototype.reload=function(t,e){var n=this,r=t.email,o=t.firstName,i=t.lastName;if(!this.frame.contentWindow)throw new Error("Frame needs a content window");var s=this.frame.contentWindow.document;this.widgetApi.cookieUser({user:{email:r||null,firstName:o||null,lastName:i||null},engagementMedium:"EMBED",widgetType:this.type,jwt:e}).then(function(t){var e=t.template;if(e){n.content=e;var o=s.createElement("button"),i=s.getElementsByClassName("squatch-register")[0];i&&(o.className="btn btn-primary",o.id="show-stats-btn",o.textContent="REFERRER_WIDGET"===n.type?"Show Stats":"Show Reward",o.setAttribute("style","margin-top: 10px; max-width: 130px; width: 100%;"),o.onclick=function(){n.load()},i.style.paddingTop="30px",i.innerHTML="<p><strong>"+r+"</strong><br>Has been successfully registered</p>",i.appendChild(o))}}).catch(function(t){var e=t.message;c(""+e)})},e.prototype._error=function(e,n,r){return void 0===n&&(n="embed"),void 0===r&&(r=""),t.prototype._error.call(this,e,n,r)},e}(s.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(26),i=r.default("squatch-js:widget"),s=function(){function t(t){i("widget initializing ..."),this.content="error"===t.content?this._error(t.rsCode):t.content,this.type=t.type,this.widgetApi=t.api||null,this.analyticsApi=new o.default({domain:t.domain}),this.frame=document.createElement("iframe"),this.frame.squatchJsApi=this,this.frame.width="100%",this.frame.scrolling="no",this.frame.setAttribute("style","border: 0; background-color: none;")}return t.prototype._loadEvent=function(t){t&&this.analyticsApi.pushAnalyticsLoadEvent({tenantAlias:t.analytics.attributes.tenant,externalAccountId:t.analytics.attributes.accountId,externalUserId:t.analytics.attributes.userId,engagementMedium:t.mode.widgetMode}).then(function(e){i(t.mode.widgetMode+" loaded event recorded. "+e)}).catch(function(t){i(new Error("pushAnalyticsLoadEvent() "+t))})},t.prototype._shareEvent=function(t,e){t&&this.analyticsApi.pushAnalyticsShareClickedEvent({tenantAlias:t.analytics.attributes.tenant,externalAccountId:t.analytics.attributes.accountId,externalUserId:t.analytics.attributes.userId,engagementMedium:t.mode.widgetMode,shareMedium:e}).then(function(n){i(t.mode.widgetMode+" share "+e+" event recorded. "+n)}).catch(function(t){i(new Error("pushAnalyticsLoadEvent() "+t))})},t.prototype._inviteContacts=function(t,e){t&&this.widgetApi.invite({tenantAlias:t.analytics.attributes.tenant,accountId:t.analytics.attributes.accountId,userId:t.analytics.attributes.userId,emailList:e}).then(function(t){i("Sent email invites to share "+e+". "+t)}).catch(function(t){i(new Error("invite() "+t))})},t.prototype._error=function(t,e,n){return void 0===e&&(e="modal"),void 0===n&&(n=""),'<!DOCTYPE html>\n    \x3c!--[if IE 7]><html class="ie7 oldie" lang="en"><![endif]--\x3e\n    \x3c!--[if IE 8]><html class="ie8 oldie" lang="en"><![endif]--\x3e\n    \x3c!--[if gt IE 8]>\x3c!--\x3e<html lang="en">\x3c!--<![endif]--\x3e\n    <head>\n      <link rel="stylesheet" media="all" href="https://d2rcp9ak152ke1.cloudfront.net/assets/css/widget/errorpage.min.css">\n      <style>\n        '+n+'\n      </style>\n    </head>\n    <body>\n\n      <div class="squatch-container '+e+'">\n        <div class="errorheader">\n          <button type="button" class="close" onclick="window.frameElement.squatchJsApi.close();">&times;</button>\n          <p class="errortitle">Error</p>\n        </div>\n        <div class="errorbody">\n          <div class="sadface"><img src="https://d2rcp9ak152ke1.cloudfront.net/assets/images/face.png"></div>\n          <h4>Our referral program is temporarily unavailable.</h4><br>\n          <p>Please reload the page or check back later.</p>\n          <p>If the persists please contact our support team.</p>\n          <br>\n          <br>\n          <div class="right-align errtxt">\n            Error Code: '+t+"\n          </div>\n        </div>\n      </div>\n    </body>\n    </html>"},t.prototype._findInnerContainer=function(){var t=this.frame.contentWindow;if(!t)throw new Error("Squatch.hs frame inner frame is empty");var e=t.document,n=e.getElementsByTagName("sqh-global-container"),r=e.getElementsByClassName("squatch-container"),o=0<n.length?n[0]:0<r.length?r[0]:null;return o||e.body},t}();e.default=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i=n(11),s=n(13),a=n(12),c=o("squatch-js:CTAwidget"),u=function(t){function e(e,n){var r=this;c("CTA constructor");var o=document.createElement("div");return o.id="cta",document.body.appendChild(o),r=t.call(this,e,"#cta")||this,n.side||n.position||(n.position="bottom",n.side="right"),"middle"===n.position?(r.position="top: 45%;",r.side="center"===n.side?"right: 45%;":n.side+": -10px;"):(r.position=n.position+": -10px;",r.side="center"===n.side?"right: 45%;":n.side+": 20px;"),r.positionClass=n.position,r.ctaFrame=document.createElement("iframe"),r.ctaFrame.squatchJsApi=r,r.ctaFrame.scrolling="no",r.ctaFrame.setAttribute("style","border:0; background-color:transparent; position:fixed; display:none;"+r.side+r.position),document.body.appendChild(r.ctaFrame),c("ctaframe appended to body"),r}return r(e,t),e.prototype.load=function(){if(t.prototype.load.call(this),!this.frame.contentWindow)throw new Error("frame requires a contentWindow");var e=this.frame.contentWindow.document,n=this.ctaFrame,r=this.positionClass;a.domready(e,function(){var t=e.getElementById("cta");if(t){if(!t.parentNode)throw new Error("ctaElement requires a parentNode");if(t.parentNode.removeChild(t),!n.contentWindow)throw new Error("ctaFrame requires a contentWindow");var o=n.contentWindow.document;o.open(),o.write(t.innerHTML),o.close(),a.domready(o,function(){var t=o.getElementsByClassName("cta-container")[0];t.style.position="fixed",n.height=t.offsetHeight,n.width=t.scrollWidth,n.style.display="block",t.classList.contains(r)||(t.className+=" "+r),new i.default(function(t){for(var e=0,r=t;e<r.length;e++){var o=r[e].contentRect,i=o.height,s=o.width;n.height=i,n.width=s}}).observe(t),c("CTA template loaded into iframe")})}else c(new Error("CTA element not found in theme"))})},e.prototype.open=function(){t.prototype.open.call(this)},e.prototype.close=function(){t.prototype.close.call(this)},e}(s.default);e.default=u},,function(t,e,n){t.exports=n(19)},function(t,e,n){"use strict";function r(){return f}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i=n(23);e.Widgets=i.default;var s=n(14);e.EmbedWidget=s.default;var a=n(13);e.PopupWidget=a.default;var c=n(16);e.CtaWidget=c.default;var u=n(3);e.WidgetApi=u.default;var l=n(27),d=n(28);(function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])})(n(29)),o.default.disable("squatch-js*");var h=o.default("squatch-js"),p=null,f=null,m=null;e.api=function(){return p},e.widgets=r,e.events=function(){return m},e.init=function(t){(t.tenantAlias.match("^test")||t.debug)&&o.default.enable("squatch-js*"),h("initializing ...");var e={tenantAlias:t.tenantAlias,domain:t.domain};p=new u.default(e),f=new i.default(e),m=new l.default(e),h("Widget API instance",p),h("Widgets instance",f),h("Events API instance",m)},e.ready=function(t){t()},e.autofill=function(t){r().autofill(t)},e.submitEmail=function(t){r().submitEmail(t)},window&&d.default()},function(t){function e(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(t){if(c===setTimeout)return setTimeout(t,0);if((c===e||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(){p&&d&&(p=!1,d.length?h=d.concat(h):f=-1,h.length&&i())}function i(){if(!p){var t=r(o);p=!0;for(var e=h.length;e;){for(d=h,h=[];++f<e;)d&&d[f].run();f=-1,e=h.length}d=null,p=!1,function(t){if(u===clearTimeout)return clearTimeout(t);if((u===n||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(t);try{u(t)}catch(e){try{return u.call(null,t)}catch(e){return u.call(this,t)}}}(t)}}function s(t,e){this.fun=t,this.array=e}function a(){}var c,u,l=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:e}catch(t){c=e}try{u="function"==typeof clearTimeout?clearTimeout:n}catch(t){u=n}}();var d,h=[],p=!1,f=-1;l.nextTick=function(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new s(t,e)),1!==h.length||p||r(i)},s.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=a,l.addListener=a,l.once=a,l.off=a,l.removeListener=a,l.removeAllListeners=a,l.emit=a,l.prependListener=a,l.prependOnceListener=a,l.listeners=function(){return[]},l.binding=function(){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(e,n,r){function o(e){var r,o=0;for(r in e)o=(o<<5)-o+e.charCodeAt(r),o|=0;return n.colors[t(o)%n.colors.length]}function i(t){function e(){if(e.enabled){var t=e,r=+new Date,o=r-(s||r);t.diff=o,t.prev=s,t.curr=r,s=r;for(var i=Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];i[0]=n.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var c=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(e,r){if("%%"===e)return e;c++;var o=n.formatters[r];if("function"==typeof o){var s=i[c];e=o.call(t,s),i.splice(c,1),c--}return e}),n.formatArgs.call(t,i),(e.log||n.log||console.log.bind(console)).apply(t,i)}}return e.namespace=t,e.enabled=n.enabled(t),e.useColors=n.useColors(),e.color=o(t),"function"==typeof n.init&&n.init(e),e}var s;(n=e.exports=i.debug=i.default=i).coerce=function(t){return t instanceof Error?t.stack||t.message:t},n.disable=function(){n.enable("")},n.enable=function(t){n.save(t),n.names=[],n.skips=[];for(var e=("string"==typeof t?t:"").split(/[\s,]+/),r=e.length,o=0;o<r;o++)e[o]&&("-"===(t=e[o].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")))},n.enabled=function(t){var e,r;for(e=0,r=n.skips.length;e<r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e<r;e++)if(n.names[e].test(t))return!0;return!1},n.humanize=r(22),n.names=[],n.skips=[],n.formatters={}},function(t){function n(t){if(!(100<(t+="").length)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();return"years"===r||"year"===r||"yrs"===r||"yr"===r||"y"===r?n*l:"days"===r||"day"===r||"d"===r?n*u:"hours"===r||"hour"===r||"hrs"===r||"hr"===r||"h"===r?n*c:"minutes"===r||"minute"===r||"mins"===r||"min"===r||"m"===r?n*a:"seconds"===r||"second"===r||"secs"===r||"sec"===r||"s"===r?n*s:"milliseconds"===r||"millisecond"===r||"msecs"===r||"msec"===r||"ms"===r?n:void 0}}}function r(t){return t>=u?e(t/u)+"d":t>=c?e(t/c)+"h":t>=a?e(t/a)+"m":t>=s?e(t/s)+"s":t+"ms"}function o(t){return i(t,u,"day")||i(t,c,"hour")||i(t,a,"minute")||i(t,s,"second")||t+" ms"}function i(t,e,n){return t<e?void 0:t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var s=1e3,a=60*s,c=60*a,u=24*c,l=365.25*u;t.exports=function(t,e){e=e||{};var i=typeof t;if("string"==i&&0<t.length)return n(t);if("number"==i&&!1===isNaN(t))return e.long?o(t):r(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}c((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(s=2&n[0]?i.return:n[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,n[1])).done)return s;switch(i=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(!(s=0<(s=c.trys).length&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=e.call(t,c)}catch(t){n=[6,t],i=0}finally{o=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,s,a,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),s=n(24),a=n(3),c=n(14),u=n(13),l=n(16),d=i.default("squatch-js:widgets"),h=function(){function t(e){this.tenantAlias=e.tenantAlias,this.api=new a.default(e),this.domain=e.domain||"",s.addEventListener("submit_email",t.cb)}return t.prototype.createCookieUser=function(e){return r(this,void 0,void 0,function(){var n,r;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.api.cookieUser(e)];case 1:return n=o.sent(),[2,{widget:this.renderWidget(n,e),user:n.user}];case 2:throw r=o.sent(),d(r),r.apiErrorCode&&t.renderErrorWidget(r,e.engagementMedium),r;case 3:return[2]}})})},t.prototype.upsertUser=function(e){return r(this,void 0,void 0,function(){var n,r;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.api.upsertUser(e)];case 1:return n=o.sent(),[2,{widget:this.renderWidget(n,e),user:n.user}];case 2:throw r=o.sent(),d(r),r.apiErrorCode&&t.renderErrorWidget(r,e.engagementMedium),r;case 3:return[2]}})})},t.prototype.render=function(e){return r(this,void 0,void 0,function(){var n,r;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.api.cookieUser(e)];case 1:return n=o.sent(),[2,{widget:this.renderWidget({template:n},e),user:n.user}];case 2:throw(r=o.sent()).apiErrorCode&&t.renderErrorWidget(r,e.engagementMedium),r;case 3:return[2]}})})},t.prototype.autofill=function(t){"function"==typeof t&&this.api.squatchReferralCookie().then(t).catch(function(t){throw d("Autofill error",t),t});var e,n=document.querySelectorAll(t);if(!(0<n.length))throw d("Element id/class or function missing"),new Error("Element id/class or function missing");e=n[0],this.api.squatchReferralCookie().then(function(t){var n=t.code;e.value=n}).catch(function(t){throw t})},t.prototype.submitEmail=function(e){s.removeEventListener("submit_email",t.cb),s.addEventListener("submit_email",e)},t.prototype.renderWidget=function(e,n){if(void 0===n&&(n={widgetType:"",engagementMedium:""}),d("Rendering Widget..."),!e)throw new Error("Unable to get a response");if(!e.jsOptions)throw new Error("Missing jsOptions in response");var r,o=!1,i=!1,s=e.jsOptions||"",a={content:e.template,type:n.widgetType||s.widget.defaultWidgetType,api:this.api,domain:this.domain};if(s.widgetUrlMappings&&s.widgetUrlMappings.forEach(function(n){t.matchesUrl(n.url)&&("CONVERSION_WIDGET"!==n.widgetType||e.user.referredBy&&e.user.referredBy.code?(o=n.displayOnLoad,i=n.showAsCTA,d("Display "+n.widgetType+" on "+n.url)):d("Don't display "+n.widgetType+" when no referral on widget rule match "+n.url))}),s.conversionUrls&&s.conversionUrls.forEach(function(n){e.user.referredBy&&t.matchesUrl(n)&&d("This is a conversion URL",n)}),s.fuelTankAutofillUrls&&(d("We found a fuel tank autofill!"),s.fuelTankAutofillUrls.forEach(function(n){var r=n.url,o=n.formSelector;if(t.matchesUrl(r)&&(d("Fuel Tank URL matches"),e.user.referredBy&&e.user.referredBy.code)){var i=document.querySelector(o);i?i.value=e.user.referredBy.referredReward.fuelTankCode||"":d(new Error("Element with id/class "+o+" was not found."))}})),i||"EMBED"!==n.engagementMedium)if(i||"POPUP"!==n.engagementMedium)if(i){d("display CTA");var h=s.cta.content.buttonSide,p=s.cta.content.buttonPosition;(r=new l.default(a,{side:h,position:p})).load(),o&&r.open()}else d("display popup on load"),(r=new u.default(a)).load(),o&&r.open();else(r=new u.default(a)).load(),o&&r.open();else(r=new c.default(a)).load();return r},t.renderErrorWidget=function(t,e){var n=t.apiErrorCode,r=t.rsCode,o=t.message;void 0===e&&(e="POPUP"),d(new Error(n+" ("+r+") "+o));var i,s={content:"error",rsCode:r,type:"ERROR_WIDGET"};"EMBED"===e?i=new c.default(s):"POPUP"==e&&(i=new u.default(s)),i.load()},t.matchesUrl=function(t){return!!window.location.href.match(new RegExp(t))},t.cb=function(t,e,n){var r;r="string"==typeof n||n instanceof String?{email:n}:n,e.reload(r)},t}();e.default=h},function(t){t.exports=function(){var t={};return(t=function(){this.listeners={}}).prototype={addEventListener:function(t,e,n){for(var r=[],o=arguments.length,i=0;i<o;i++)r.push(arguments[i]);r=3<r.length?r.splice(3,r.length-1):[],void 0===this.listeners[t]?this.listeners[t]=[{scope:n,callback:e,args:r}]:this.listeners[t].push({scope:n,callback:e,args:r})},removeEventListener:function(t,e,n){if(void 0!==this.listeners[t]){for(var r,o=this.listeners[t].length,i=[],s=0;s<o;s++)(r=this.listeners[t][s]).scope==n&&r.callback==e||i.push(r);this.listeners[t]=i}},hasEventListener:function(t,e,n){if(void 0!==this.listeners[t]){var r=this.listeners[t].length;if(void 0===e&&void 0===n)return 0<r;for(var o,i=0;i<r;i++)if(o=this.listeners[t][i],(!n||o.scope==n)&&o.callback==e)return!0}return!1},dispatch:function(t,e){for(var n={type:t,target:e},r=[],o=arguments.length,i=0;i<o;i++)r.push(arguments[i]);if(r=2<r.length?r.splice(2,r.length-1):[],r=[n].concat(r),void 0!==this.listeners[t]){var s,a=this.listeners[t].length;for(i=0;i<a;i++)if((s=this.listeners[t][i])&&s.callback){var c=r.concat(s.args);s.callback.apply(s.scope,c)}}},getEvents:function(){var t="";for(var e in this.listeners)for(var n,r=this.listeners[e].length,o=0;o<r;o++)t+=(n=this.listeners[e][o]).scope&&n.scope.className?n.scope.className:"anonymous",t+=" listen for '"+e+"'\n";return t}},new t}()},function(t){var e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=function(){function t(t){var e=t.domain;this.domain=e||"https://app.referralsaasquatch.com"}return t.prototype.pushAnalyticsLoadEvent=function(t){var e=encodeURIComponent(t.tenantAlias),n=encodeURIComponent(t.externalAccountId),o=encodeURIComponent(t.externalUserId),i=encodeURIComponent(t.engagementMedium),s=this.domain+"/a/"+e+"/widgets/analytics/loaded?externalAccountId="+n+"&externalUserId="+o+"&engagementMedium="+i;return r.doPost(s,JSON.stringify({}))},t.prototype.pushAnalyticsShareClickedEvent=function(t){var e=encodeURIComponent(t.tenantAlias),n=encodeURIComponent(t.externalAccountId),o=encodeURIComponent(t.externalUserId),i=encodeURIComponent(t.engagementMedium),s=encodeURIComponent(t.shareMedium),a=this.domain+"/a/"+e+"/widgets/analytics/shared?externalAccountId="+n+"&externalUserId="+o+"&engagementMedium="+i+"&shareMedium="+s;return r.doPost(a,JSON.stringify({}))},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(4);var r=n(1),o=function(){function t(t){var e=t.tenantAlias,n=t.domain;if(!e)throw new Error("tenantAlias not provided");this.tenantAlias=e,this.domain=n||"https://app.referralsaasquatch.com"}return t.prototype.logEvent=function(t){var e=t.type,n=t.fields,o=void 0===n?null:n,i=t.jwt,s=encodeURIComponent(this.tenantAlias),a=this.domain+"/api/v1/"+s+"/open/events/log";return r.doPut(a,JSON.stringify({type:e,fields:o}),i)},t}();e.default=o},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=window.squatch||null,e=window._squatch||null;if(t&&e){(e.ready||[]).forEach(function(t){return setTimeout(function(){return t()},0)}),window._squatch=void 0;try{delete window._squatch}catch(e){throw e}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.help=function(){console.log("Having trouble using Squatch.js? Go to https://docs.referralsaasquatch.com/developer/ for tutorials, references and error codes.")}}])});