<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>simplified JS</title>
    <script>
    !function(a,b){
      a("squatch","./dist/Squatch.js",b)
    }(function(a,b,c){
      // a = context
      // b = file
      // c = context
      // console.log(a,b,c === window);

      var d,e,f;
      c["_" + a] = {},
      c[a] = {},
      c[a].ready = function(b){
        c["_" + a].ready =  c["_" + a].ready || [];
        c["_" + a].ready.push(b);
      }


      e=document.createElement("script"),
      e.async=1,
      e.src=b,
      f=document.getElementsByTagName("script")[0],
      f.parentNode.insertBefore(e,f)
    },this);
    </script>
</head>
<body>
  <script>

  squatch.ready(function(){
    squatch.init({
      tenantAlias: "test_ak9htmontgeca"
    });

    // Data and widget
    var user;
    var widget

    squatch.widgets().createCookieUser({
      engagementMedium: 'POPUP'
    });

    // squatch.widgets().upsertUser({
    //   user: {
    //     id: '123',
    //     accountId: 'abc',
    //     firstName: 'Jorge',
    //     lastName: 'Conde',
    //     email: 'jorge@uvic.ca'
    //   }
    // }).then(function (response) {
    //   user = response.user;
    //   widget = response.widget;
    // }).catch(function (err) {
    //   console.log(err);
    // });

    // squatch.submitEmail(function(target, widget, email) {
    //   // Sign email
    //   var jwt = 'token';
    //
    //   widget.reload(email, jwt);
    // })

  });

  // squatch.ready(function(){
  //   squatch.init({ tenantAlias: "YOUR_TENANT_ALIAS" });
  //   squatch.widgets.createCookieUser({});
  // });

  </script>

  <input type="text" name="Coupon" id="my_coupon" value="" />
  <div id="squatchembed"></div>
  <button id="squatchpop">Open Modal</button>
</body>
</html>
