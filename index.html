<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>simplified JS</title>
    <script>
    !function(a,b){
      a("squatch","./dist/Squatch.js",b)
    }(function(a,b,c){
      // a = context
      // b = file
      // c = context
      // console.log(a,b,c === window);

      var d,e,f;
      c["_" + a] = {},
      c[a] = {},
      c[a].ready = function(b){
        c["_" + a].ready =  c["_" + a].ready || [];
        c["_" + a].ready.push(b);
      }


      e=document.createElement("script"),
      e.async=1,
      e.src=b,
      f=document.getElementsByTagName("script")[0],
      f.parentNode.insertBefore(e,f)
    },this);
    </script>
</head>
<body>
  <script>

  squatch.ready(function(){
    squatch.init({
      tenantAlias: "test_asmhxnffb9cml"
    });

    var initObj = {
      user: {
        "id": "abc_123",
        "accountId": "abc_123",
        "firstName": "John",
        "lastName": "Doe",
        "email": "john@example.com",
        "referable": true,
        "referralCode": "JOHNDOE",
        "referredBy": {
          "code": "JANEDOE",
          "isConverted": true
        }
      },
      engagementMedium: 'POPUP',
      widgetType: 'REFERRER_WIDGET',
      jwt: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjp7ImlkIjoiYWJjXzEyMyIsImFjY291bnRJZCI6ImFiY18xMjMiLCJmaXJzdE5hbWUiOiJKb2huIiwibGFzdE5hbWUiOiJEb2UiLCJlbWFpbCI6ImpvaG5AZXhhbXBsZS5jb20iLCJyZWZlcmFibGUiOnRydWUsInJlZmVycmFsQ29kZSI6IkpPSE5ET0UiLCJyZWZlcnJlZEJ5Ijp7ImNvZGUiOiJKQU5FRE9FIiwiaXNDb252ZXJ0ZWQiOnRydWV9fX0.3IqZGSfsseEWa-1WYx8jB9i0r2f5nbKXqD2ByH8byCc'
    }


    squatch.widgets().upsertUser(initObj).then(function(res){
      console.log(res);
    }).catch(function(err) {
      console.log(err);
    });

  });

  </script>

  <input type="text" name="Coupon" class="testClass" value="" />
  <div id="squatchembed"></div>
  <div class="squatchpop">click here</div>
</body>
</html>
