<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>simplified JS</title>
    <script>
    !function(a,b){
      a("squatch","./dist/Squatch.js",b)
    }(function(a,b,c){
      // a = context
      // b = file
      // c = context
      // console.log(a,b,c === window);

      var d,e,f;
      c["_" + a] = {},
      c[a] = {},
      c[a].ready = function(b){
        c["_" + a].ready =  c["_" + a].ready || [];
        c["_" + a].ready.push(b);
      }


      e=document.createElement("script"),
      e.async=1,
      e.src=b,
      f=document.getElementsByTagName("script")[0],
      f.parentNode.insertBefore(e,f)
    },this);
    </script>
</head>
<body>
  <script>

  squatch.ready(function(){
    squatch.init({
      domain: 'https://staging.referralsaasquatch.com',
    tenantAlias: 'test_ahq6tdmfclzwx'
    });

    var initObj = {
      widgetType: "p/jorge3/w/referrerWidget",
      engagementMedium: 'POPUP',
      user: {
        id: 'abc_123',
        accountId: 'abc_123',
        email: 'john@example.com',
        firstName: 'John',
        lastName: 'Doe'
      },
      jwt: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjp7ImlkIjoiYWJjXzEyMyIsImFjY291bnRJZCI6ImFiY18xMjMiLCJlbWFpbCI6ImpvaG5AZXhhbXBsZS5jb20iLCJmaXJzdE5hbWUiOiJKb2huIiwibGFzdE5hbWUiOiJEb2UifX0.8UIafGkjo8pnqh_7BG57QXhTZNRnJ2IKTPzejWFL1iA'
    }


    squatch.widgets().upsertUser(initObj).then(function(res){
      console.log(res);
    }).catch(function(err) {
      console.log(err);
    });

  });

  </script>

  <input type="text" name="Coupon" class="testClass" value="" />
  <div id="squatchembed"></div>
  <div class="squatchpop">click here</div>
</body>
</html>
